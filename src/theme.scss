/*****************************************
 *
 * Youlag Theme for FreshRSS
 *
 * Version: 3.0.7
 * License: GNU General Public License v3.0
 * Author: civilblur @ github
 * 
 ****************************************/


/*****************************************
 *
 * INDEX
 * - Variables and keyframes
 * - Feed grid layout
 * - Common layout elements
 * - Card
 * - Mapco theme dark mode (1)
 *  - Dark mode: Global styles
 *  - Dark mode: Dropdown, dialog, box
 *  - Dark mode: Feed side navigation
 *  - Dark mode: Settings side navigation
 *  - Dark mode: Card
 * - Card expanded - Inline view mode (2)
 * - Favorites page
 * - Reader view page
 * - Animation keyframes
 * - Youlag theater view modal
 * - Youlag theater pip view
 * - Youlag tags (playlists) modal
 * - Youlag extension settings page
 * - Youlag helper classes
 * 
 * 
 * NOTE
 * (1)
 * To revert Mapco theme to light mode,
 * comment out the CSS in the 
 * "Mapco theme dark mode" section.
 * 
 * (2)
 * This is a fallback view of displaying
 * feed items, if the Youlag script is not
 * utilized or fails to load.
 *
 * 
 * TODO
 * - Refactor values to CSS variable, such as
 * colors, border-radius, margin, padding, 
 * spacing, etc.
 * 
 ****************************************/



/*****************************************
 * BEGIN "VARIABLES AND KEYFRAMES"
 ****************************************/


@mixin yl-gradient-bg($color: #cbd5e1, $colorDarker: #64748b, $hover: true) {
  background: linear-gradient(
    to bottom,
    color-mix(in oklab, $color 10%, transparent),
    color-mix(in oklab, $colorDarker 15%, transparent)
  );
  backdrop-filter: blur(60px);
  border: 1px solid color-mix(in oklab,$color 30%,transparent);
  transition: filter 0.2s ease-in-out;

  @if $hover {
    &:hover {
      background: linear-gradient(
        to bottom,
        color-mix(in oklab, $color 10%, transparent),
        color-mix(in oklab, $colorDarker 15%, transparent)
      );
      filter: brightness(1.3) saturate(1.4);
    }
  }
}

@mixin yl-gradient-btn-bg($color: #cbd5e1, $colorDarker: #64748b) {
  background: radial-gradient(circle at center right, $colorDarker, $color);
  &:hover {
    background: radial-gradient(circle at center right, $colorDarker, $color);
    filter: brightness(1.3) saturate(1.4);
  }
}

@function yl-fn-gradient-btn-bg($color: #cbd5e1, $colorDarker: #64748b) {
  @return radial-gradient(circle at center right, $colorDarker, $color);
}

:root {
  --yl-space-3xs: clamp(0.3125rem, 0.3125rem + 0vw, 0.3125rem);
  --yl-space-2xs: clamp(0.5625rem, 0.5408rem + 0.1087vw, 0.625rem);
  --yl-space-xs: clamp(0.875rem, 0.8533rem + 0.1087vw, 0.9375rem);
  --yl-space-sm: clamp(1.125rem, 1.0815rem + 0.2174vw, 1.25rem);
  --yl-space-md: clamp(1.6875rem, 1.6223rem + 0.3261vw, 1.875rem);
  --yl-space-lg: clamp(2.25rem, 2.163rem + 0.4348vw, 2.5rem);
  --yl-space-xl: clamp(3.375rem, 3.2446rem + 0.6522vw, 3.75rem);
  --yl-space-2xl: clamp(4.5rem, 4.3261rem + 0.8696vw, 5rem);
  --yl-space-3xl: clamp(6.75rem, 6.4891rem + 1.3043vw, 7.5rem);

  --yl-p-3xs: var(--yl-space-3xs);
  --yl-p-2xs: var(--yl-space-2xs);
  --yl-p-xs: var(--yl-space-xs);
  --yl-p-sm: var(--yl-space-sm);
  --yl-p-md: var(--yl-space-md);
  --yl-p-lg: var(--yl-space-lg);
  --yl-p-xl: var(--yl-space-xl);
  --yl-p-2xl: var(--yl-space-2xl);
  --yl-p-3xl: var(--yl-space-3xl);

  --yl-m-3xs: var(--yl-space-3xs);
  --yl-m-2xs: var(--yl-space-2xs);
  --yl-m-xs: var(--yl-space-xs);
  --yl-m-sm: var(--yl-space-sm);
  --yl-m-md: var(--yl-space-md);
  --yl-m-lg: var(--yl-space-lg);
  --yl-m-xl: var(--yl-space-xl);
  --yl-m-2xl: var(--yl-space-2xl);
  --yl-m-3xl: var(--yl-space-3xl);

  --yl-text-3xs: clamp(0.6563rem, 0.6455rem + 0.0217vw, 0.6875rem);
  --yl-text-2xs: clamp(0.7813rem, 0.7747rem + 0.0326vw, 0.8rem);
  --yl-text-xs: clamp(0.9375rem, 0.9158rem + 0.1087vw, 1rem);
  --yl-text-sm: clamp(1.125rem, 1.0815rem + 0.2174vw, 1.25rem);
  --yl-text-md: clamp(1.35rem, 1.2761rem + 0.3696vw, 1.5625rem);
  --yl-text-lg: clamp(1.62rem, 1.5041rem + 0.5793vw, 1.9531rem);
  --yl-text-xl: clamp(1.944rem, 1.771rem + 0.8651vw, 2.4414rem);
  --yl-text-2xl: clamp(2.3328rem, 2.0827rem + 1.2504vw, 3.0518rem);
  --yl-text-3xl: clamp(2.7994rem, 2.4462rem + 1.7658vw, 3.8147rem);

  --yl-favicon-avatar-size: 34px;
  --yl-favicon-avatar-size-margin: 6px;
  --yl-feed-day-title-font-size: 1.7rem;
  --yl-video-pip-width: min(460px, 60%);
  --yl-article-thumbnail-width: 120px;
  --yl-topnav-height: 57px; /* Desktop: Youlag topnav height */
  --yl-feed-nav-menu-height: 61px; /* Desktop: Youlag custom feed `.nav_menu` default height */ 
  --yl-sidenav-width: 280px;
  --yl-sidenav-label-font-size: calc(var(--yl-text-xs) * 0.95);
  --yl-sidenav-sublabel-font-size: var(--yl-text-2xs);
  --yl-sidenav-icon-size: 16px;
  --yl-sidenav-icon-label-gap: var(--yl-space-sm);

  --yl-color-body-background: #19191a;
  --yl-color-gradient-surface-3: linear-gradient(135deg, #303030 0%, #3a3d3f 40%, #2d2d2d 100%);
  --yl-color-gradient-active: #{yl-fn-gradient-btn-bg(#2761d5, #1b51bb)};
  --yl-color-text-default: #dedee4;
  --main-font-color: var(--yl-color-text-default); /* Replace FreshRSS default font color */
  --yl-color-text-default-emphasis: #f8f8fb; /* Stronger contrast than default text color, e.g. for titles */
  --yl-color-text-read: #c0c0c0; /* Read feed item text color */

  --yl-loading-spinner-background-image: url("data:image/svg+xml,%3Csvg width='24' height='24' stroke='%23fff' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle%3E.spinner_V8m1%7Btransform-origin%3Acenter%3Banimation%3Aspinner_zKoa 2s linear infinite%7D.spinner_V8m1 circle%7Bstroke-linecap%3Around%3Banimation%3Aspinner_YpZS 1.5s ease-in-out infinite%7D%40keyframes spinner_zKoa%7B100%25%7Btransform%3Arotate(360deg)%7D%7D%40keyframes spinner_YpZS%7B0%25%7Bstroke-dasharray%3A0 150%3Bstroke-dashoffset%3A0%7D47.5%25%7Bstroke-dasharray%3A42 150%3Bstroke-dashoffset%3A-16%7D95%25%2C100%25%7Bstroke-dasharray%3A42 150%3Bstroke-dashoffset%3A-59%7D%7D%3C/style%3E%3Cg class='spinner_V8m1'%3E%3Ccircle cx='12' cy='12' r='9.5' fill='none' stroke-width='3'%3E%3C/circle%3E%3C/g%3E%3C/svg%3E");
  --frss-loading-image: var(--yl-loading-spinner-background-image); /* Replace FreshRSS loading spinner icon. */

  --frss-noThumbnailImage-background-color: #4d4d4d; /* FreshRSS striped background color, when image is not yet loaded */
}

@media (max-width: 840px) {
  :root {
    --yl-favicon-avatar-size: 42px;
    --yl-sidenav-label-font-size: calc(var(--yl-text-md) * 0.9);
    --yl-sidenav-sublabel-font-size: var(--yl-text-sm);
    --yl-sidenav-icon-size: 20px;
    --yl-sidenav-icon-label-gap: var(--yl-space-sm);
    --yl-topnav-height: 54px;
  }
}

@media (max-width: 480px) {
  :root {
    --yl-sidenav-width: max(80%, 280px);
  }
}

@keyframes pulse {
  0%, 100% {
    filter: brightness(1);
  }
  50% {
    filter: brightness(0.6);
  }
}

@keyframes fade-in {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@keyframes fade-in--youlag-loading {
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}




/*****************************************
 * END "VARIABLES AND KEYFRAMES"
 ****************************************/






/*****************************************
 *
 * BEGIN "FEED GRID LAYOUT"
 *
 * Turn the feed table view to grid view.
 *
 ****************************************/

body.youlag-active:not(.reader) main#stream {
  display: grid;
  grid-template-columns: repeat(3, minmax(150px, 1fr));
  gap: 4px;
  padding: 0 var(--yl-p-sm) var(--yl-p-sm) var(--yl-p-sm);

  @media (max-width: 840px) {
    grid-template-columns: minmax(200px, 1fr);
  }

  @media (min-width: 600px) {
    grid-template-columns: repeat(2, minmax(200px, 1fr));
  }

  @media (max-width: 600px) {
    grid-row-gap: var(--yl-m-xs);
  }

  @media (min-width: 1144px) {
    grid-template-columns: repeat(3, minmax(200px, 1fr));
  }

  @media (min-width: 1360px) {
    grid-template-columns: repeat(4, minmax(240px, 1fr));
  }

  @media (min-width: 1800px) {
    grid-template-columns: repeat(5, minmax(200px, 1fr));
  }
}


/*****************************************
 * END "FEED GRID LAYOUT"
 ****************************************/








/*****************************************
 *
 * BEGIN "COMMON LAYOUT ELEMENTS"
 *
 * For misc. elements such as navigation,
 * structural titles, etc.
 *
 ****************************************/

html {
  .alert-warn {
    @include yl-gradient-bg(#fbb324, #b97d0d, false);
    color: var(--yl-color-text-default);
    border-radius: 8px;
  }
}

.yl-form-category__video-label {
  /* Extension category list label, for users who enabled 'Video platform labels'. Hide by default. */
  display: none;
}

.youlag-video-labels {
  /* Change the labels and references to "Favorite" and "My Labels/Tags" based on user settings. */

  .yl-form-category {
    /* Extension "Appearance" settings: display both labels in the DOM, show label according to `body.youlag-video-labels` */

    &__video-label {
      display: inline-block;
    }

    &__original-label {
      display: none;
    }
  }

  &.yl-page-playlists:not([class*="yl-page-t_"]) {
    /* Set transition name to "Playlists" only on parent pages. */
    main#stream {
      .transition .name,
      #new-article + .transition .name {
        font-size: 0;
        
        &:before {
          content: "Playlists";
          font-size: var(--yl-text-md);
        }
      }
    }
  }

  &.yl-page-watch_later {
    /* Set transition name to "Watch later" only on parent pages. */
    main#stream {
      .transition .name,
      #new-article + .transition .name {
        font-size: 0;
        
        &:before {
          content: "Watch later";
          font-size: var(--yl-text-md);
        }
      }
    }
  }


  nav.aside.aside_feed {
    #mark-read-aside ul#sidebar {

      /* Playlists ("My labels") button */
      #tags {
        /* Always display Playlist ("My Labels") button */
        display: list-item !important;

        .tree-folder-title .title {
          font-size: 0;

          &:before {
            content: "Playlists";
            line-height: 1;
          }
        }

        button.dropdown-toggle .icon {
          /* Hide playlist ("My Labels") dropdown toggle icon while keeping its functionality */
          opacity: 0;
        }

        & > .tree-folder-items .item.feed .item-title .icon {
          /* Remove tag item icons */
          display: none;
        }

        .tree-folder-title:before {
          /* Playlist icon */
          content:"";
          width: var(--yl-sidenav-icon-size);
          height: var(--yl-sidenav-icon-size);
          position: absolute;
          filter: invert(1);
          background-repeat: no-repeat;
          background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCA4MDAgODAwIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMCA5MC41QTM3LjUgMzcuNSAwIDAgMSAzNy41IDUzaDcyNUEzNy40OTcgMzcuNDk3IDAgMCAxIDgwMCA5MC41YTM3LjUgMzcuNSAwIDAgMS0zNy41IDM3LjVoLTcyNUEzNy40OTggMzcuNDk4IDAgMCAxIDAgOTAuNVpNMzcuNSAzMjhoNzI1YTM3LjQ5NiAzNy40OTYgMCAwIDAgMjYuNTE2LTEwLjk4NCAzNy40OTYgMzcuNDk2IDAgMCAwIDAtNTMuMDMzQTM3LjUgMzcuNSAwIDAgMCA3NjIuNSAyNTNoLTcyNUEzNy41MDIgMzcuNTAyIDAgMCAwIDAgMjkwLjUgMzcuNDk3IDM3LjQ5NyAwIDAgMCAzNy41IDMyOFptMjQ0IDEyNWgtMjQ0QTM3LjUwMiAzNy41MDIgMCAwIDAgMCA0OTAuNSAzNy40OTcgMzcuNDk3IDAgMCAwIDM3LjUgNTI4aDI0NGEzNy41IDM3LjUgMCAwIDAgMC03NVpNMzcuNSA2NTNoMjQ0YTM3LjUgMzcuNSAwIDAgMSAwIDc1aC0yNDRhMzcuNDk5IDM3LjQ5OSAwIDAgMSAwLTc1WiIvPjxwYXRoIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSI2NSIgZD0iTTYzNi44MzMgNDY5Ljg4YzgwLjExOCA0Ni4zNTggMTIwLjE4MSA2OS41MzQgMTI2LjA2MiAxMDIuOTc0YTcyLjkzNyA3Mi45MzcgMCAwIDEgMCAyNS4yOTNjLTUuODgxIDMzLjQzOS00NS45NDQgNTYuNjE1LTEyNi4wNjIgMTAyLjk3My04MC4xMTcgNDYuMzUzLTEyMC4xODEgNjkuNTI5LTE1Mi4wMTggNTcuOTE2YTcyLjU2NiA3Mi41NjYgMCAwIDEtMjEuODU4LTEyLjY0NkM0MzcgNzI0LjU2MyA0MzcgNjc4LjIxIDQzNyA1ODUuNWMwLTkyLjcxIDAtMTM5LjA2MyAyNS45NTctMTYwLjg5YTcyLjY3IDcyLjY3IDAgMCAxIDIxLjg1OC0xMi42NDZjMzEuODM3LTExLjYxMyA3MS45MDEgMTEuNTY0IDE1Mi4wMTggNTcuOTE2WiIvPjwvc3ZnPg==);
        }
      }

      /* Watch later ("Favorites") button */
      .tree-folder.category.favorites {
        
        .tree-folder-title .title {
          font-size: 0;

          &:before {
            content: "Watch later";
            line-height: 1;
          }
        }
      }

    }
  }

  /* Settings page buttons */
  #aside_feed .item.nav-section a[href="./?c=tag"] {
    font-size: 0;
    transition: background-color 0.2s;

      &:before {
      content: "Playlist management";
      font-size: var(--yl-text-sm);
    }
  }

  /* Change text in settings page containing "Label" to "Playlist" */
  main.post:has(#add_tag) {
    > h1:first-of-type {
      font-size: 0;

      &:before {
        content: "Playlist management";
        font-size: var(--yl-text-lg);
      }
    }

    > h2:first-of-type {
      font-size: 0;

      &:before {
        content: "Create a playlist";
        font-size: var(--yl-text-md);
      }
    }
  }

  main#stream .flux {
    article.flux_content {

      footer {
        li.labels {
          .dropdown-toggle .dropdown-label {
            font-size: 0;

            &:before {
              content: "Save to playlist";
              font-size: var(--yl-text-xs);
            }
          }
        }
      }
    }
  }
}

#yl_nav_menu_container_toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--yl-p-2xs) var(--yl-p-sm);
  border: 1px solid hsla(0, 0%, 100%, .08);
  border-radius: 12px;  background-color: rgba(255, 255, 255, 0.04);
  cursor: pointer;
  font-size: var(--yl-text-xs);

  &:hover {
    background-color: hsla(0, 0%, 100%, .08);
  }
}

#yl_nav_menu_container {
  /* Custom element for placing the FreshRSS `.nav_menu`. */
  grid-column: 1 / -1; /* Span full width in youlag-active layout */
  background-color: var(--yl-color-body-background);

  &.yl-nav-menu-container--sticky {
    position: sticky;
    top: calc(var(--yl-feed-nav-menu-height) - 1px); /* HACK: Prevent half-pixel gap depending on browser zoom label. */
    z-index: 20;
    transition: transform 0.18s cubic-bezier(.4,0,.2,1), opacity 0.18s cubic-bezier(.4,0,.2,1);
    will-change: transform, opacity;
    box-shadow: -1px 0 0 var(--yl-color-body-background), 1px 0 0 var(--yl-color-body-background), 0 -1px 0 var(--yl-color-body-background); /* HACK: Address youlag-inactive (article view), if browser is zoomed out, make sure to still overlap half-pixels on the edges. */

    @media (max-width: 840px) {
      top: calc(var(--yl-topnav-height) + var(--yl-feed-nav-menu-height));
    }
  }

  &.yl-nav-menu-container--open {   
    padding-bottom: var(--yl-p-xs);
    
    #yl_nav_menu_container_content {
      display: flex;
      gap: var(--yl-m-xs);
      align-items: flex-start;
      flex-wrap: wrap;
      padding-top: var(--yl-p-xs);

      @media (max-width: 840px) {
        padding-left: var(--yl-p-sm);
        padding-right: var(--yl-p-sm);
      }

      & > * {
        margin: 0; /* Reset margin (gutter for nav_menu groups), prioritize flex gap instead. */
      }
    }
  }
}

nav.aside.aside_feed {
  /* Position and adjust behavior of "Subscriptions management" button */
  text-align: unset;

  &.visible {
    & ~ #yl_nav_menu_container {
      /* Accommmodate fixed sidenav expanded state. */
      padding-left: calc(var(--yl-sidenav-width) + var(--yl-p-sm));
    }
  }

  /* Manage feeds ("Subscriptions management") button */
  .stick.configure-feeds {
    position: relative;

    &:before {
      content: "Manage feeds";
      position: absolute;
      top: 50%;
      /* The 21px represents the padding and margin-left around the button. */
      left: calc(21px + var(--yl-sidenav-icon-size) + var(--yl-sidenav-icon-label-gap));
      transform: translateY(-50%);
      z-index: 1;
      font-weight: normal;
      pointer-events: none;
    }

    &:after {
      /* RSS icon */
      content: "";
      position: absolute;
      top: 50%;
      left: 21px;
      transform: translateY(-50%);
      z-index: 1;
      filter: invert(1);
      width: var(--yl-sidenav-icon-size);
      height: var(--yl-sidenav-icon-size);
      pointer-events: none;
      background-repeat: no-repeat;
      background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHZpZXdCb3g9IjAgMCA0OTAgNDkwIj48cGF0aCBkPSJNNDY4LjIgNDg5LjVIMjAuOEM5LjQgNDg5LjUgMCA0ODAuMSAwIDQ2OC43VjIxLjNDMCA5LjkgOS40LjUgMjAuOC41aDQ0OC40QzQ4MC42LjUgNDkwIDkuOSA0OTAgMjEuM3Y0NDguNGMtMSAxMC40LTEwLjQgMTkuOC0yMS44IDE5Ljh6TTQwLjYgNDQ4LjloNDA3LjhWNDEuMUg0MC42djQwNy44eiIvPjxwYXRoIGQ9Ik0yNjAuMSA0MTkuOGMtMTEuNCAwLTIwLjgtOS40LTIwLjgtMjAuOCAwLTc3LTYyLjQtMTM5LjQtMTM5LjQtMTM5LjQtMTEuNCAwLTIwLjgtOS40LTIwLjgtMjAuOFM4OC41IDIxOCA5OS45IDIxOGM5OS45IDAgMTgxIDgxLjEgMTgxIDE4MSAwIDExLjQtOS40IDIwLjgtMjAuOCAyMC44eiIvPjxwYXRoIGQ9Ik0zNDcuNSA0MTkuOGMtMTEuNCAwLTIwLjgtOS40LTIwLjgtMjAuOCAwLTEyNC44LTEwMi0yMjcuOC0yMjcuOC0yMjcuOC0xMS40IDAtMjAuOC05LjQtMjAuOC0yMC44czkuNC0yMC44IDIwLjgtMjAuOGMxNDcuNyAwIDI2OC40IDEyMC43IDI2OC40IDI2OC40IDEgMTIuNC04LjQgMjEuOC0xOS44IDIxLjh6TTE3My43IDQxOS44Yy0xMS40IDAtMjAuOC05LjQtMjAuOC0yMC44IDAtMjkuMS0yMy45LTUzLjEtNTMuMS01My4xLTExLjQgMC0yMC44LTkuNC0yMC44LTIwLjhzOS40LTIwLjggMjAuOC0yMC44YzUyIDAgOTQuNyA0Mi43IDk0LjcgOTQuNyAwIDExLjQtOS4zIDIwLjgtMjAuOCAyMC44eiIvPjwvc3ZnPg==);
    }

    #btn-subscription,
    #btn-add {
      transition: 0s;
    }

    #btn-subscription:hover,
    #btn-subscription:hover ~ #btn-add,
    #btn-add:hover {
      background: var(--yl-color-gradient-surface-3);

    }

    #btn-add {
      border-top-right-radius: 8px;
      border-bottom-right-radius: 8px;

      &:before {
        /* Hack: When hovering #btn-add, also highlight #btn-subscription */
        content: "";
        width: calc(100% - 68px);
        height: 100%;
        background: #303136;
        left: 8px;
        position: absolute;
        border-top-left-radius: 8px;
        border-bottom-left-radius: 8px;
        pointer-events: none;
        opacity: 0;
        transition: 0s;
      }

      &:hover {
        background-color: #424348;

        &:before {
          opacity: 1;
        }
      }
    }

    #btn-subscription {
      /* Hide text, later replace with psuedo element :before text */
      font-size: 0;
      flex: 1;
      height: 46px;
      margin-left: 8px;
      border-top-left-radius: 8px;
      border-bottom-left-radius: 8px;
      color: var(--yl-color-text-default-emphasis);
    }

    #btn-subscription,
    #btn-add {
      text-transform: capitalize;
      font-weight: normal;
      display: flex;
      align-items: center;
      background: none;
      box-sizing: border-box;
    }

    #btn-add {
      font-size: var(--yl-text-sm);
      border-top-right-radius: 8px;
      border-bottom-right-radius: 8px;
      background: none;
      border: none;
      width: 60px;
      display: flex;
      justify-content: center;
      align-items: center;
      color: var(--yl-color-text-default-emphasis);

      .icon {
        filter: brightness(3);
        height: 1.5rem;
      }

      &:hover {
        background-color: #424348;
      }
    }
  }

  #mark-read-aside ul#sidebar {

    .tree-folder.category {
      .tree-folder-title .title {
        font-weight: normal;
        background: none;
      }
    }

    & > li.tree-folder ul.tree-folder-items li.item.feed > .dropdown {
      margin-right: 0;
    }

    /* Subscriptions ("Main stream") button */
    .tree-folder.category.all {
      .tree-folder-title .title {
        font-size: 0;

        &:before {
          content: "Subscriptions";
        }
      }

      .icon {
        opacity: 0;
        pointer-events: none;
      }

      .tree-folder-title:before {
        /* Video icon */
        content:"";
        width: var(--yl-sidenav-icon-size);
        height: var(--yl-sidenav-icon-size);
        position: absolute;
        filter: invert(1);
        pointer-events: none;
        background-repeat: no-repeat;
        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA4MDAgODAwIj48cGF0aCBkPSJNNzY2LjE5Ni43MzVIMzMuOTY2QzE1LjM1LjczNSAwIDE2LjA4NSAwIDM0Ljd2NjAxLjQyN2MwIDE4LjYxNiAxNS4zNSAzMy45NjcgMzMuOTY2IDMzLjk2N2g3MzAuNDMzYzE4LjYxNiAwIDMzLjk2Ni0xNS4zNTEgMzUuNTk5LTMyLjMzNFYzNC43MDFDODAwLjE2MiAxNi4wODUgNzg0LjgxMi43MzUgNzY2LjE5Ni43MzVabS0zMy45NjYgNjAzLjA2SDY2LjNWNjcuMDM0aDY2NS45M3Y1MzYuNzYxWk03NjYuMTk2IDczMS4zMzJIMzMuOTY2QzE1LjM1IDczMS4zMzIgMCA3NDYuNjgyIDAgNzY1LjI5OHMxNS4zNSAzMy45NjYgMzMuOTY2IDMzLjk2Nmg3MzAuNDMzYzE4LjYxNiAwIDM1LjU5OS0xNS4zNSAzNS41OTktMzMuOTY2LjE2NC0xOC43OC0xNS4xODYtMzMuOTY2LTMzLjgwMi0zMy45NjZaIi8+PHBhdGggZD0iTTUxNi40MDggMzA4LjIwOCAzNDYuNjEyIDE5NC40MTJjLTIyLjIwNC0xNC41My01MC45MzkgMi4xMjMtNTAuOTM5IDI3LjEwMnYyMjcuNTkyYzAgMjYuMjg2IDI4LjczNSA0MS40NjkgNTAuOTM5IDI3LjEwMmwxNjkuNzk2LTExMy43OTZjMTUuMTg0LTguMTYzIDI0LjY1My0zNi4yNDUgMC01NC4yMDRabS0xNTQuNjEyIDc4LjA0MVYyODQuMzcxbDc2LjQwOCA1MC45MzktNzYuNDA4IDUwLjkzOVoiLz48L3N2Zz4=);
      }
    }


    /* Important feeds button */
    .tree-folder.category.important {
      .tree-folder-title .title {
        font-size: 0;

        &:before {
          content: "Important";
        }
      }

      .icon {
        opacity: 0;
        pointer-events: none;
      }

      .tree-folder-title:before {
        /* Bell icon */
        content:"";
        width: var(--yl-sidenav-icon-size);
        height: var(--yl-sidenav-icon-size);
        position: absolute;
        filter: invert(1);
        background-repeat: no-repeat;
        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHZpZXdCb3g9IjAgMCA0ODcuNzcgNDg3Ljc3Ij48cGF0aCBkPSJNNDg2LjIgMjEwLjI2Yy02LjMtMTguOC0yNi4xLTIxLjktNDQuOC0yNS0xOS44LTMuMS00Mi43LTYuMy01OS40LTI0LTc2LjEtODMuNC0xNDEuOC0xMDEuMS0xODMuNS0xMDIuMS0xNy43LS41LTM0LjYgMi4yLTUwLjMgNy44LTMuOC0zNy40LTM1LjUtNjYuOC03My45LTY2LjhDMzMuMy4xNiAwIDMzLjQ2IDAgNzQuNDZjMCAzOC44IDI5LjggNzAuNyA2Ny43IDc0LTUuNiAxNS44LTguMyAzMi42LTcuOCA1MC40IDEgNDEuNyAxOS44IDEwNi4zIDEwMi4yIDE4My41IDE3LjcgMTYuNyAyMC45IDM5LjYgMjQgNTkuNCAzLjEgMTguOCA2IDM5LjUgMjUgNDQuOCAyMC4xIDUuNiA0Ny0xMSA5NC01NC41IDE3LjEgMTYuMyA0MC4yIDI1LjkgNjQuMyAyNS45IDUxLjIgMCA5Mi45LTQxLjcgOTIuOS05Mi45IDAtMjQuNi05LjgtNDgtMjYuOC02NS4zIDQ5LjUtNTQgNTYuMS03MS43IDUwLjctODkuNXpNNDAuOSA3NC40NmMwLTE4LjQgMTQuOS0zMy4zIDMzLjMtMzMuM3MzMy4zIDE0LjkgMzMuMyAzMy4zLTE0LjkgMzMuMy0zMy4zIDMzLjMtMzMuMy0xNC45LTMzLjMtMzMuM3ptMzI4LjQgMzQyLjVjLTEzIDAtMjUuMi00LjgtMzQuNi0xMy4xIDExLjEtMTEuMSA2My02NS4xIDcyLjQtNzQuMyA4LjkgOS41IDE0LjEgMjIuMiAxNC4xIDM1LjUgMCAyOC42LTIzLjMgNTEuOS01MS45IDUxLjl6bS0xNDIuNyAyNy45YzAtMy4xLTkuNC02NS43LTM3LjUtOTEuNy01Ny4zLTUzLjItODcuNi0xMDYuMy04OC42LTE1NC4zIDAtMjguMSAxOC42LTEwMC4yIDk4LTk5IDQ4IC43IDEwMS4xIDMxLjMgMTU0LjMgODguNiAyNi4xIDI4LjEgODguNiAzNy41IDkxLjcgMzcuNS0xNC43IDI2LjgtMTkyIDIwNC42LTIxNy45IDIxOC45eiIvPjwvc3ZnPg==);
      }
    }


    /* Favorites button */
    .tree-folder.category.favorites {
      .icon {
        opacity: 0;
        pointer-events: none;
      }

      .tree-folder-title:before {
        /* Star icon */
        content:"";
        width: var(--yl-sidenav-icon-size);
        height: var(--yl-sidenav-icon-size);
        position: absolute;
        filter: invert(1);
        pointer-events: none;
        background-repeat: no-repeat;
        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj48cGF0aCBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTEuMDkxIDIuNjM1Yy4yODgtLjY0Ny40MzItLjk3LjYzMy0xLjA3YS42MjEuNjIxIDAgMCAxIC41NTIgMGMuMjAxLjEuMzQ1LjQyMy42MzMgMS4wN2wyLjI5NCA1LjE1Yy4wODUuMTkyLjEyOC4yODcuMTk0LjM2LjA1OC4wNjUuMTMuMTE3LjIwOS4xNTMuMDkuMDQuMTk0LjA1LjQwMi4wNzNsNS42MDMuNTkyYy43MDMuMDc0IDEuMDU1LjExMSAxLjIxMi4yNzEuMTM2LjE0LjE5OS4zMzQuMTcuNTI3LS4wMzIuMjIxLS4yOTUuNDU4LS44Mi45MzJsLTQuMTg2IDMuNzc2Yy0uMTU1LjE0LS4yMzMuMjEtLjI4Mi4yOTVhLjYyNC42MjQgMCAwIDAtLjA4LjI0NmMtLjAxLjA5OC4wMTEuMi4wNTUuNDA1bDEuMTY5IDUuNTE3Yy4xNDcuNjkzLjIyIDEuMDQuMTE2IDEuMjM4YS42MjIuNjIyIDAgMCAxLS40NDcuMzI1Yy0uMjIuMDM3LS41MjctLjE0LTEuMTQtLjQ5M2wtNC44OC0yLjgxOGMtLjE4Mi0uMTA1LS4yNzItLjE1Ny0uMzY5LS4xNzdhLjYyMi42MjIgMCAwIDAtLjI1OCAwYy0uMDk3LjAyLS4xODcuMDcyLS4zNjguMTc3bC00Ljg4MSAyLjgxOGMtLjYxMy4zNTQtLjkyLjUzLTEuMTQuNDkzYS42MjIuNjIyIDAgMCAxLS40NDctLjMyNWMtLjEwNC0uMTk5LS4wMy0uNTQ1LjExNi0xLjIzOGwxLjE3LTUuNTE3Yy4wNDMtLjIwNC4wNjQtLjMwNy4wNTQtLjQwNWEuNjI0LjYyNCAwIDAgMC0uMDgtLjI0NmMtLjA0OS0uMDg1LS4xMjctLjE1NS0uMjgyLS4yOTVsLTQuMTg1LTMuNzc2Yy0uNTI2LS40NzQtLjc4OS0uNzEtLjgyMS0uOTMyYS42MjMuNjIzIDAgMCAxIC4xNy0uNTI3Yy4xNTctLjE2LjUwOS0uMTk3IDEuMjEyLS4yNzFsNS42MDQtLjU5MmMuMjA4LS4wMjIuMzEyLS4wMzMuNDAxLS4wNzNhLjYyMi42MjIgMCAwIDAgLjIxLS4xNTJjLjA2NS0uMDc0LjEwOC0uMTcuMTkzLS4zNmwyLjI5NC01LjE1MVoiLz48L2c+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBkPSJNMCAwaDI0djI0SDB6Ii8+PC9jbGlwUGF0aD48L2RlZnM+PC9zdmc+);
      }
    }

  }

  /**
   * Side navigation button label font adjustment:
   * - Manage feed ("Subscriptions management")
   * - Subscriptions ("Main stream")
   * - Important
   * - Favorites
   * - Playlists ("My labels")
   * - User's category
   */
  .stick.configure-feeds:before,
  .tree-folder.category.all .tree-folder-title .title:before,
  .tree-folder.category.important .tree-folder-title .title:before,
  .tree-folder.category.favorites .tree-folder-title .title:before,
  #tags .tree-folder-title .title:before,
  .tree-folder.category .tree-folder-title .title {
    font-size: var(--yl-sidenav-label-font-size);
    letter-spacing: 1px;
    font-weight: normal;
    max-width: 64%; /* Avoid overlapping with badge count. */
    color: var(--yl-color-text-default-emphasis);
  }


  /* Keep "Subscriptions management" button sticky on scroll */
  .stick.configure-feeds {
    position: sticky;
    top: 50px;
    z-index: 10;
    width: calc(var(--yl-sidenav-width) - 7px);
  }

  @media (max-width: 840px) {
    .stick.configure-feeds {
      width: calc(100% - 8px);
    }
  }

  #mark-read-aside {
    top: calc(50px + 52px); /* Padding-top of container + height of "Subscriptions management" button */
  }
}

@media (max-width: 840px) {

  header.header {
    /* Mobile: Header */
    position: fixed;
    top: 0;
    left: 0;
    z-index: 50;

    &:has(.configure .dropdown-target:target) {
      /* On mobile, prevent the fixed hamburger menu `nav_menu .toggle_aside` 
      to sit on top of the settings menu. Applies for feed and non-feed pages. */
      z-index: 110;
    }

    .configure .dropdown .dropdown-menu {
      /* Remove gap on left side. */
      left: 0 !important;
      width: max(80%, 280px);

      & ~ .dropdown-close {
        height: 100vh;
        z-index: 40;
      }

      .toggle_aside {
        background: var(--yl-color-gradient-active);
      }
    }
  }

  #slider {

    .btn.toggle_aside {
      /* Reset fixed navigation for non-feed pages. */
      max-width: 49px;
      margin: 0;
      padding: 0.85rem 1.25rem;
      background: #303136;
      border: none;
  
      &:hover {
        background-color: #424348;
      }
    }
  }

  .aside {
    &:target ~ aside#slider a.toggle_aside {
      /* Hide the fixed hamburger menu on non-feed page when its `aside_feed` menu is opened,
      to prevent overlapping. */
      opacity: 0;
      pointer-events: none;
      transition: opacity 0s;
    }

    & ~ aside#slider a.toggle_aside {
      /* Fade in the hamburger menu on non-feed page, 
      to prevent abrupt display of the button while `aside_feed` is being collapse animated. */
      transition: opacity 0.3s;
    }

  }



  body:not(.normal) #aside_feed.nav.nav-list.aside {
    padding-top: 0;
  }

}

.header {
  --sid-bg: transparent; /* Header background color */
  height: var(--yl-topnav-height);
  box-sizing: border-box;
  z-index: 50;

  @media (max-width: 840px) {
    /* Mobile: header gradient background, adjust to accommodate colors for the header content on mobile */
    --sid-bg: linear-gradient(135deg, #303030b0 0%, #252525d9 40%, #2d2d2da1 100%);
    backdrop-filter: blur(80px);
  }


  /* Page logo */
  .item.title {
    position: relative;
    text-align: unset;
    padding-left: 5px;
    height: 100%;
    box-sizing: border-box;
    padding-top: 0;
    padding-bottom: 0;

    & > a {
      align-content: center;
      padding-top: 0;
      padding-bottom: 0;

      img {
        height: var(--yl-m-md) !important;
      }

      @media (min-width: 841px) {
        img {
          /* Logo, make room for sidenav toggle button */
          margin-left: 46px;
          margin-top: 4px;
          /* Set fixed size to allow sidenav logo to replicate exact sizing. See '.youlag-loaded #aside_feed::before'. */
          width: 130px;
          height: 26px !important;
        }
      }
    }
    

    @media (max-width: 840px) {
      /* Mobile, logo: Set aside space for sidenav toggle button. */
      padding-left: 48px;
    }
  }

  .item {
    /* Header items padding top and padding bottom. */
    --frss-padding-top-bottom: var(--yl-p-2xs);
  }

  /* Header search bar */
  .item.search {
    display: flex;
    justify-content: center;
    max-width: 75%;
    margin: 0 auto;
    margin-left: 15%;

    form {
      max-width: 100%;
    }
    
    input {
      width: 600px;
      height: 40px;
      padding: 0.8rem 1.6rem;
      border-top-left-radius: 99px;
      border-bottom-left-radius: 99px;
      background: transparent;
      border: 1px solid hsla(0, 0%, 100%, .14);

      &:focus,
      &:hover {
        background-color: rgba(255,255,255,0.05);
        color: var(--yl-color-text-default);
        outline: none;

        & ~ .btn {
          background-color: #292929;
        }
      }
    }

    .btn {
      border-top-right-radius: 99px;
      border-bottom-right-radius: 99px;
      width: 64px;

      &:hover {
        background-color: #57575a;
      }
    }
  }

  /* Header settings button */
  .item.configure {
    width: calc(40px + var(--yl-p-sm));
    text-align: left;

    .btn {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #26272a;
      border-radius: 50%;
      padding: 0;
      box-sizing: border-box;
  
      &:hover {
        background-color: #57575a;
      }
  
      > img {
        /* Sizing for default settings button */
        width: 18px;
        height: 18px;
      }
    }
  }
  

}

@media (max-width: 840px) {

  header.header {
    .item.configure {
      display: flex;
      align-items: center;
      height: 100%;
      justify-content: flex-end;
      padding-right: 14px;
      box-sizing: border-box;
  
      .btn {
        width: 40px;
        height: 40px;
      }
    }
  }

  #global .nav_menu {

    a.btn[href="#aside_feed"] {
      /* Place mobile sidenav expand button toggle on header */
      position: fixed;
      top: 0;
      left: 0;
      min-height: 61px;
      box-sizing: border-box;
      border-radius: 0;
      z-index: 50;
  
      .icon {
        /* Hide existing sidenav toggle icon */
        display: none;
      }
  
      &:after {
        /* Add new sidenav toggle icon */
        content: "";
        display: block;
        width: 14px;
        height: 36px; /* For centering the icon vertically, actual icon size is determined by the width. */
        background-image: url('../themes/Mapco/icons/view-normal.svg'); /* Existing image from FreshRSS theme "Mapco" */
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        filter: brightness(3);    
      }
    }
  
    .item.configure {

      .btn {
        width: 40px;
        height: 40px;
      }
    }
    

  }



}

/* End of feed footer */
main#stream #stream-footer,
#overlay #panel #stream-footer {
  grid-column: 1 / -1;
  border-top: none;
  margin-top: 3rem;

  .stream-footer-inner {
    /* Hide text, then, apply new text using psuedo element :before/:after */
    font-size: 0; 
    display: flex;
    flex-direction: column;

    &:before {
      content: "(╯°□°)╯︵ ┻━┻";
      font-size: 2.4rem;
      margin-bottom: 2rem;
      opacity: 0.75;
    }

    &:after {
      content: "You've reached the end";
      font-size: 1.4rem;
      order: -1;
      margin-bottom: 0.5rem;
      opacity: 0.75;
    }
  }

  button#bigMarkAsRead {
    /* Mark as read button */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;  
    border-radius: 12px;
    margin-top: var(--yl-m-md);
    padding-left: var(--yl-p-md);
    padding-right: var(--yl-p-md);
    padding-top: var(--yl-p-sm);
    padding-bottom: var(--yl-p-sm);
    margin-bottom: 0;
    width: 100%;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;

    &.big {
      .bigTick {
        transform: scale(0.65);
        transform-origin: top left;
        width: 48px;
        height: 48px;
        margin: 0;
      }
    }

    &.small {
      .bigTick {
        display: none;
      }
    }

    [style="visibility: hidden;"],
    br {
      /* Hide unused elements to prevent layout issues. */
      display: none;
    }
  }
}

#nav_entries {
  /* Bottom navigation to navigate between feed items.
     Buttons: Previous item, Scroll to top, Next item. */
  --sid-bg: linear-gradient(135deg, #303030b0 0%, #252525d9 40%, #2d2d2da1 100%);
  backdrop-filter: blur(80px);
  z-index: 45; /* Avoid blocking mobile dropdown menus that are displayed as bottom sheets. */


  @media (min-width: 841px) {
    /* Desktop: Only limit the size of the bottom navigation on desktop, as on mobile, it needs to be dynamic. */
    width: var(--yl-sidenav-width);
    z-index: 50; /* Desktop: Place bottom navigation on top of sidenav. */
  }
}

#load_more {
  /* 'Load more articles' banner */
  position: relative;
  z-index: 10;

  &.btn {
    /* Load more article button */
    backdrop-filter: blur(60px);
    border: 1px solid color-mix(in oklab, #0058e6 30%, transparent);
    transition: filter .2s ease-in-out;
    box-shadow: inset -8px 4px 70px 0px hsl(208.4deg 100% 41.56% / 13%);
    background-color: transparent;
  }

  &.btn.loading {
    /* Infinite scroll loading spinner, loading state. */
    background-image: var(--yl-loading-spinner-background-image);
    background-repeat: no-repeat;
    background-position: center;
  }

  &:hover {
    /* Infinite scroll loading spinner. */
    border-radius: 8px;
  }  
}

/* Feed menu */
.nav_menu {
  padding: var(--yl-p-sm) var(--yl-p-xs) 0 var(--yl-p-xs);
  box-sizing: border-box;

  div[id^="nav_menu"] > a:only-child,
  div[id^="nav_menu"] > div:only-child a {
    /* Round all corners for orphaned menu button. */
    border-radius: 6px !important;
  }

  #nav_menu_actions {
    flex-wrap: wrap;
  }

  #mark-read-menu {
    align-items: center;

    .read_all.btn {
      width: 100%;
      height: 100%;
    }
  }

}

main#stream {
  .transition {
    /* Hide all date transitions by default. Then later, enable the first date transition, used as a page title through the category name '.transition .name'. */
    display: none;
  }

  #new-article + .transition {
    /* Global: Date transition in feeds, only the first one. */
    display: flex;
    align-items: center;
    text-align: left;
    font-weight: 400;
    letter-spacing: 0;
    text-transform: none;
    line-height: 1;
    margin: 0;
    padding: var(--yl-m-2xs) 0;
    height: var(--yl-feed-nav-menu-height);
    box-sizing: border-box;

    &.yl-freshrss-transition--sticky {
      position: sticky;
      top: 0;
      z-index: 20;
      transition: transform 0.18s cubic-bezier(.4,0,.2,1), opacity 0.18s cubic-bezier(.4,0,.2,1);
      will-change: transform, opacity;
      box-shadow: -1px 0 0 var(--yl-color-body-background), 1px 0 0 var(--yl-color-body-background), 0 -1px 0 var(--yl-color-body-background); /* HACK: Address youlag-inactive (article view), if browser is zoomed out, make sure to still overlap half-pixels on the edges. */

      @media (max-width: 840px) {
        top: var(--yl-topnav-height);
      }
    }

    .name {
      /* Show category name for the first date transition. */
      flex: 1;
      display: inline-block;
      opacity: 1;
      font-size: var(--yl-text-md);
      text-align: left;
      text-transform: none;
      font-weight: bold;
      line-height: 1;
      padding: 0 var(--yl-p-sm) 0 0;
      margin: 0;
    }


    .transition-value {     
      /* Hide transition dates for video feeds, keeping rest of styling intact,
        in case this ends up becoming an option in the extension settings instead. */
      display: none;
      
      a {
        color: var(--frss-font-color-grey-dark);
      }
    }

    .transition-next {
      font-size: 0;
      margin-left: 4px;
      opacity: 1;

      &:before {
        content: "→";
        line-height: 1;
        color: #ababab;
        border: 1px solid hsla(0,0%,100%,.14);
        background-color: hsla(0,0%,100%,.10);
        width: 18px;
        height: 18px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border-radius: 6px;
        font-size: var(--yl-text-sm);
        font-family: monospace;
      }
    }
  }

}

.youlag-active {

  @media (max-width: 840px) {
    #yl_nav_menu_container {
      &.yl-nav-menu-container--open {

        #yl_nav_menu_container_content {
          padding-left: 0;
          padding-right: 0;
        }
      }
    }
  }


  main#stream {
    #new-article + .transition {
      /* youlag-active: first date transition */
      display: flex;
      grid-column: 1 / -1;
      line-height: 1.2;
      font-size: var(--yl-text-md);

      @media (max-width: 600px) {
        /* Mobile: Maintain consistent bottom margin for transition category title. */
        margin-bottom: calc(var(--yl-m-md) * -1); /* Negate, and add back margin. */
      }
    }

    .flux:has(li.item.labels .item-element.dropdown .dropdown-target:target) {
      /* Prevent card item favicon avatar to be placed above Playlist (labels) dropdown */
      z-index: 20;
    }
  }

}

nav.nav_menu {
  padding: 0;

  #nav_menu_toggle_aside {
    /* Mobile: Container for sidenav toggle button. */
    position: fixed;
    top: 12px;
    left: 7px;
    z-index: 60;
    margin: 0;

    @media (max-width: 840px) {
      top: 5px;
      left: 5px;
    }
  
    /* Button to toggle (show/hide) sidenav. */
    & > button.btn {
      border-radius: 8px;
      transition: background-color 0.3s;
  
      @media (max-width: 840px) {
        height: 43px;
        background: transparent;
      }
  
      &:before {
        content: "";
        width: 16px;
        height: 14px;
        background-image: url("../themes/Mapco/icons/view-normal.svg");
        background-size: contain;
        display: inline-block;
        filter: brightness(3);
      }
  
      .icon {
        /* Hide existing sidenav toggle icon */
        display: none;
      }
  
      &.active {
        background: transparent;
        background-color: transparent;
      }
  
      &:hover {
        background-color: #57575a;
      }
    }
  }
}

a.signout img.icon {
  display: none;
}


/*****************************************
 *
 * BEGIN "CARD"
 *
 * Feed items are referred to as cards,
 * as they're styled as grid cells opposed
 * to FreshRSS' table view.
 *
 ****************************************/

/* Cards default state in feed */
body.youlag-active:not(.reader) main#stream div.flux {
  display: flex;
  flex-direction: column;
  align-items: center;
  border-radius: 12px;
  margin-bottom: auto; /* Prevents card from becoming incredibly tall affected by other grid cells, e.g. #bigMarkAsRead. */

  /* Card hover effect */
  &:not(.active):hover {
    background: linear-gradient(209deg, #4d4b4b 0%, #212124 40%, #333 100%);
  }

  &:not(.not_read),
  &.favorite:not(.current),
  &:not(.current):hover .item .title {
    background: unset;
    background-color: unset;
  }

  &.favorite {
    background: linear-gradient(209deg, #5c3c1a 0%, #181009 40%, #3d260a 100%) !important;
  }



  &:not(.current):not(.active) .flux_header {
    &:before {
      /* Decorative attr(data-article-authors) text on thumbnail placeholder, visible for feeds without images */
      /* Alternative: content:  attr(data-website-name); */
      content: attr(data-article-authors);
      position: absolute;
      top: 0;
      left: 0;
      z-index: 0;
      width: calc(100% - 24px);
      height: 0;
      padding-top: 16%;
      padding-bottom: calc(40.2% - 12px);
      padding-left: 20px;
      font-size: min(1.7rem,5vw);
      color: var(--yl-color-text-default);
      box-sizing: border-box;
      overflow: hidden;
      background: linear-gradient(to right, #5c8dff, #4cffdd);
      background-clip: border-box;
      background-clip: border-box;
      -webkit-background-clip: text;
      -webkit-text-fill-color: rgba(0,0,0,0);
    }
  }

  &.current.active {
    /* youlag-active: Styling for when card was triggered by FreshRSS bottom navigation 'Settings -> Display -> Show the navigation buttons',
       and not captured byy youlag's eventlistener. */
    overflow-x: hidden;
    
    .flux_header {
      background-color: #282626 !important;
      height: auto; /* Prevent expanding when parent element is stretched. */
  
      .titleAuthorSummaryDate {
        padding-left: 0 !important; /* Reset position, that otherwise would have been reserved for author avatar. */
      }
    }

    .flux_content {
      max-width: 100%;
      flex: 1;
      background: linear-gradient(135deg, #292929 0%, #252525 40%, #282828 100%);
      
      & > .content {
        max-width: 100%;
        margin: 0;
      } 
    }
  }

  /* Card container */
  .flux_header {
    /* In card default state, the header is the card container itself, unlike in card expended view where it is used as a header/toolbar. */
    border-radius: 12px;
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    height: 100%;
    max-width: 100%;
    padding: 8px;
    box-sizing: border-box;
    border: none;
    background: unset;

    &:hover,
    &:hover:not(.current):hover .item .title {
      /* Prevent background change on hover. */
      background-color: unset;
      background: unset;
    }

    .item.titleAuthorSummaryDate {
      display: flex;
      flex-direction: column;
      width: 100%;
      margin: 4px 0 var(--yl-m-xs) 0;


      @media (min-width: 600px) {
        & {
          /* Hack: On desktop, keep position consistent while allowing 100% vertical stretch of .flux and .flux-header */
          height: 105px;
        }
      }


      a.item-element.title.multiline {
        display: flex;
        flex-direction: column;
        position: static;
        padding-top: 0;
        padding-bottom: 0;
        padding-left: 2px;
        padding-right: 2px;
        min-width: unset;
        font-size: 1.2rem;
        white-space: normal;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 4;
        line-clamp: 4;
        overflow: hidden;

        .author {
          padding: 0;
          display: block;
          margin-top: 4px;
          font-size: 1rem;
          line-height: 1.2;
          color: hsla(0, 0%, 100%, 0.59);
        }
      }

      span.item-element.date {
        padding: 0;
        position: static;
        text-align: left;
        margin-top: 4px;
        padding-left: 2px;
        padding-right: 2px;
        display: flex;
        width: 100%;
        font-size: 1rem;
      }
    }

    .item.thumbnail {
      /* Card thumbnail */
      position: relative;
      
      order: -1; /* Position thumbnail first within card, at the top */
      width: 100%;
      height: auto;
      aspect-ratio: 16 / 9;
      flex: 0 0 100%;
      box-sizing: border-box;
      margin-bottom: 4px;
      padding: 0;
      overflow: hidden;

      img {
        position: relative;
        width: 100%;
        height: auto;
        border-radius: 12px;
        background: #303136;
        aspect-ratio: 16 / 9;
        object-fit: cover;
        object-position: center;
        z-index: 1;
      }
      
      &:before {
        /* Placeholder for empty thumbnails */
        content: "";
        width: 100%;
        position: absolute;
        top: 0;
        left: 0;
        padding-top: 56.25%;
        background-color: #303136;
        background-image: linear-gradient(45deg, #121417, #17253f);
        border-radius: 12px;
        z-index: 0;
      }
    }

  }

}

/* Card expanded state in feed */
body.youlag-active:not(.reader) main#stream div.flux.active.current {

  /* Card expanded header, serves as a top panel. */
  .flux_header {
    position: sticky;
    top: -4px;
    left: 0;
    background-color: var(--frss-background-color, white);
    z-index: 1;
    padding: 12px;
    margin-top: -4px;
    border-bottom-left-radius: 2px;
    border-bottom-right-radius: 2px;
    pointer-events: none; /* Prevents card header clicks from closing the rss item. */


    .item a,
    .item .dropdown-close,
    .item .dropdown-menu {
      /* Reenable action buttons within card header */
      pointer-events: all;
    }

    .item .dropdown-menu {
      z-index: 1100;

      li.item.share {
        min-width: 100%;
        margin: 0;
      }
    }

    .item.titleAuthorSummaryDate {
      display: flex;
      flex-direction: column;
      flex-wrap: wrap;
      order: -1;
      min-width: unset;
      flex: 0 0 100%;
      margin-bottom: 6px;
      z-index: 10;
      height: auto;
      

      /* Card title */
      a {
        /* Shorten width to prevent overlap with close button. */
        max-width: calc(100% - 50px);
        pointer-events: none;
      }

      .item-element.date {
        /* Hide date in theater mode to save vertical space */
        display: none;
      }
    }


    li.item.website {
      /* Hide website icon in theater mode expanded view */
      display: none;
    }

    li.item.thumbnail {
      /* Hide thumbnail in theater mode expanded view */
      display: none;
    }
    
  }

  /* Card content container */
  article {
    display: flex;
    flex-direction: column;
    background: linear-gradient(135deg, #303030 0%, #232323 40%, #181818 100%);
  }
}

/* Card icons and button behavior */
body.youlag-active:not(.reader) main#stream {
  div.flux {

    li.item.share,
    li.item.labels {
      /** 
      * Specific adjustment due to these card buttons containing dropdown menu 
      * - Share button
      * - Playlists button (labels)
      */

      &:has(.dropdown-target:target) {
        /* Temporarily elevate z-index to prevent other buttons to show on top of dropdown. */
        z-index: 15;
      }

      .item-element.dropdown {
        display: flex;
        width: 100%;
        height: 100%;
        padding: 0;

        a.dropdown-toggle {
          /* Make button clickable across the entire button area, opposed to only the icon. */
          width: 100%;
          display: inline-flex;
          margin: 0;
          padding: 0;
          height: 100%;
          border-radius: 999px;
          justify-content: center;
          align-items: center;
          gap: 4px;
        }
      }
    }

    .flux_header {

      @media (min-width: 841px) {
        &:hover {
          /* Desktop, youlag-active: only show the border around card actions on hover. */
          li.item.manage,
          li.item.website.icon,
          li.item.link,
          li.item.labels,
          li.item.share {
            box-shadow: inset 0 0 0 1px hsla(0, 0%, 100%, .12);
          }
        }
      }

      @media (max-width: 840px) {
        /* Mobile, youlag-active: the buttons are always visible on mobile, so always show the card action borders. */
        li.item.manage,
        li.item.website.icon,
        li.item.link,
        li.item.labels,
        li.item.share {
          box-shadow: inset 0 0 0 1px hsla(0, 0%, 100%, .12);
        }
      }


      .summary {
        /* youlag-active: No support for summary on video cards. */
        display: none;
      }

      li.item.manage a,
      li.item.website.icon a,
      li.item.link a,
      li.item.labels a,
      li.item.share > a {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
        box-sizing: border-box;
      }

      li.item.website.full,
      li.item.website.name {
        /* For user's who set website setting to "icon and name" or "name" */
        a {
          color: var(--yl-color-text-default);
          padding: 0;
        }
      }

      li.item.manage,
      li.item.website.icon,
      li.item.website.full,
      li.item.link,
      li.item.labels,
      li.item.share {
        flex: 1;
        background-color: unset;
        display: inline-flex;
        height: auto;
        justify-content: center;
        border-radius: 12px;
        margin: 0 2px;
        padding: 0;
        z-index: 10;
        transition: background-color 0.1s;
        order: 3;
        min-height: 34px;

        li.item.share {
          width: 100%;
        }

        a {
          padding: 4px 6px;
          text-align: center;
          width: 100%;
        }

        &:has(.item-element.bookmark) {
          /* Place favorite button to the far left. */
          order: 1;
        }

        &:hover {
          background-color: hsla(0, 0%, 100%, 0.08);
        }
      }


      li.item.manage {
        order: 4; /* Put 'Mark as read' button far right. */
      }


      li.item.labels {
        
        .dropdown-header {
          display: flex;
          font-size: 0;

          &:before {
            content: "Playlists";
            letter-spacing: 1px;
            text-transform: uppercase;
            font-size: 1rem;
          }

          a[href="./?c=tag"] {
            margin-left: 8px;
            font-size: 1rem;
            visibility: visible;
            width: unset;
          }
        }

        .item-element.dropdown:not(:has(.dropdown-target:target)) {
          /* Playlists button (labels) on card: Hide close button as it displays even after onblur. */
          a.dropdown-close {
            display: none;
          }
        }

      }
      

      li.item.manage:hover,
      li.item.website.icon:hover,
      li.item.link:hover,
      li.item.labels:hover,
      li.item.share:hover {
        background-color: hsla(0, 0%, 100%, 0.08)
      }

      &:not(.active) {
        li.item.manage a,
        li.item.website.icon a,
        li.item.link a,
        li.item.labels a,
        li.item.share a {
          /* Hide card actions by default */
          visibility: hidden;
          background-color: unset;
        }

        &:hover {
          /* Display card actions on hover */
          li.item.manage a,
          li.item.website.icon a,
          li.item.link a,
          li.item.labels a,
          li.item.share a {
            visibility: visible;
          }
        }

        @media (max-width: 840px) {
          /* Always display card actions on mobile */
          li.item.manage a,
          li.item.website.icon a,
          li.item.link a,
          li.item.labels a,
          li.item.share a {
            visibility: visible !important;
          }
        }
      }

      .website a:hover .favicon,
      a.website:hover .favicon {
        /* Disable greyscale effect on website icon hover */
        filter: unset;
      }

      li.item.share {
        order: 3;
      }
    }
    
    &.active.current .flux_header {
      li.item.manage a,
      li.item.website.icon a,
      li.item.link a,
      li.item.labels a,
      li.item.share a {
        visibility: visible;
      }
    }

    /* Favorites (bookmark) button */
    &.favorite {
      .flux_header li.item.manage {
        a.bookmark {
          filter: brightness(1.5) sepia(1) hue-rotate(-25deg) saturate(4) contrast(1.2);
        }
      }
    }

    /* Favicon as avatar */
    .flux_header {
      position: relative;

      li.item.website.icon,
      li.item.website.full {
        /* If user set "Website: Icon" in Display settings */
        display: flex;
        width: 100%;
        flex: 0 0 100%;
        max-width: unset;
        flex-direction: column;
        position: absolute;
        top: 0;
        left: 0;
        justify-content: flex-start;
        border-radius: 0;
        pointer-events: none;

        .websiteName {
          /* No support for favicon website name. Instead, use display setting "Article icons: Author" */
          display: none;
        }

        & ~ .item.titleAuthorSummaryDate {
          /* If website favicon exist, add padding to make space for it. */
          padding-left: calc(var(--yl-favicon-avatar-size) + var(--yl-favicon-avatar-size-margin));
        }

        &:hover {
          background-color: unset;
        }

        &:before {
          /* Position favicon responsively. knowing that the thumbnail will always be 16:9 */
          content: "";
          width: 100%;
          height: auto;
          aspect-ratio: 16 / 9;
          z-index: -1;
          position: relative;
          visibility: hidden;
          pointer-events: none;
        }

        a.item-element {
          display: flex;
          width: calc(var(--yl-favicon-avatar-size) + var(--yl-favicon-avatar-size-margin));
          visibility: visible;
          pointer-events: all;
          box-sizing: unset;
        }

        img.favicon {
          height: var(--yl-favicon-avatar-size);
          width: var(--yl-favicon-avatar-size);
          background-color: hsl(0deg 0% 100% / 18%);
          padding: 8px;
          box-sizing: border-box;
          border-radius: 50%;
          margin-top: 2px;
        }

      }
    }

    /* Change card footer from "My labels" to "+ Add to playlist" */
    &.active.current article.flux_content {
      footer ul.horizontal-list.bottom .item.labels .item-element.dropdown a[href^="#dropdown-labels-"] {
        font-size: 0;
        white-space: nowrap;
        color: var(--yl-color-text-default);

        & + .dropdown-menu .dropdown-header {
          font-size: 0;

          &:before {
            content: "Playlists";
            letter-spacing: 1px;
            text-transform: uppercase;
            font-size: 1rem;
          }

          a[href="./?c=tag"] {
            margin-left: 8px;
            font-size: 1rem;
          }
        }

        .icon {
          display: none;
        }
      }

      .content .text {
        overflow-x: hidden;
      }

    }
  }
}

/*****************************************
 * END "CARD"
 ****************************************/






/*****************************************
 *
 * BEGIN "MAPCO THEME DARK MODE"
 *
 * Applies dark mode to the "Mapco" theme.
 * Content within `<main />` is usually 
 * light mode; this styling switches it to 
 * dark mode, along with the left side 
 * navigation.
 *
 ****************************************/


/* ====================================
 * BEGIN "Dark mode: Global styles"
 * ==================================== */

html {
  background-color: var(--yl-color-body-background); /* Display background color for macOS overscroll effect, otherwise white color is shown. */
  min-height: 100%;

  /* Global background and text color */
  body,
  #slider,
  .aside.aside_feed,
  .nav.nav-list.aside,
  .nav.nav-list.aside ul,
  .nav-list .item,
  .tree .tree-folder .tree-folder-title {
    background-color: var(--yl-color-body-background);
    --frss-font-color-dark: var(--yl-color-text-default);
    color: var(--yl-color-text-default);
  }

  iframe {
    width: 100%;
    height: auto;
    aspect-ratio: 16 / 9;
  }

  @media (min-width: 841px) {
    #aside_feed {
      /* Desktop: Only set fixed width for desktop. On mobile, adding fixed width causes the sidebar to display by default on all pages.  */
      width: var(--yl-sidenav-width);
      padding: 0;
    }

    .youlag-loaded {
      &.yl-page-home,
      &.yl-page-important,
      &.yl-page-watch_later,
      &.yl-page-playlists,
      &.yl-page-category {
        #aside_feed {
          /* Desktop: Add back FreshRSS logo to sidenav, only if youlag script and css is ready. */
          &:before {
            content: "";
            background-image: url(../themes/icons/FreshRSS-logo.svg);
            width: 130px;
            height: 26px;
            z-index: 100;
            position: absolute;
            top: 17.5px; /* Match location of FreshRSS logo in top header, underneath the fixed positioned sidenav. */
            left: 65px;
            background-repeat: no-repeat;
            filter: grayscale(1) brightness(5);
          }
        }
      }
    }
    
  }

  .yl-page-home,
  .yl-page-important,
  .yl-page-watch_later,
  .yl-page-playlists,
  .yl-page-category,
  .yl-page-search_results {
    /* Only implement fixed sidebar for feed pages (to exclude other pages like settings. */
    #aside_feed {
      position: fixed; /* sidebar, reimplement its behavior. */
      top: 0px;
      left: 0px;
      height: 100dvh;
      z-index: 50;  /* Same z-index as toggle sidenav button */
      background-color: var(--yl-color-body-background);
      box-sizing: border-box;

      .toggle_aside {
        display: none !important; /* Hide existing mobile sidenav toggle button to priotize the 'nav_menu_toggle_aside' (which has been made 'position:fixed'). */
      }

      @media (max-width: 840px) {
        z-index: 60; /* Mobile: Hide sidenav toggle, as mobile sidenav already has a close button. */
      
        &.visible {
          /* Mobile: Sidenav is visible. */
          max-width: 80%; /* Mobile: Leave space on the right side to allow onblur close. */
        }
      }

      @media (min-width: 841px) {
        padding-top: 57px; /* Desktop: Match desktop header toolbar height. */
          
        &.visible {
          /* Desktop: Sidenav is visible. */
          & ~ main#stream,
          & ~ nav.nav_menu,
          &.visible ~ main.post {
            box-sizing: border-box;
            padding-left: calc(var(--yl-sidenav-width) + var(--yl-p-sm)); /* Set aside space for the sidebar */
          }
        }
      }

      @media (min-width: 841px) and (max-width: 1020px) {
        /* HACK: Workaround for now, when the sidenav toggle button overlaps the transtion (category) title. */
        &:not(.visible) {
          & ~ main#stream .yl-freshrss-transition--sticky {
            padding-left: 44px; /* Width of sidenav toggle button. */
          }
        }
      }
  

  
      & ~ .close-aside {
        z-index: 55;
        max-width: 100vw;
        max-height: 100vh;
      }
    }
  }

  .yl-page-home {
    main#stream #new-article + .transition .name:before {
      /* Add "Subscriptions" category title to home screen. Normally it is empty. */
      content: "Subscriptions";
    }
  }

  #stream {
    position: relative; /* To position the youlag overlay, to block interactions before loaded. */
  }

  /* Text and link colors */
  label,
  .day,
  .day .name,
  .dropdown-menu .item > a,
  .dropdown-menu .item > span,
  .dropdown-menu .item > .as-link,
  .dropdown-menu .dropdown-header,
  .dropdown-menu .dropdown-section .dropdown-section-title,
  .tree .tree-folder .tree-folder-items .dropdown-menu .item a,
  .tree .tree-folder .tree-folder-items .dropdown-menu .item button,
  .transition .transition-value a {
    --frss-font-color-dark: var(--yl-color-text-default);
    color: var(--yl-color-text-default);
    font-family: inherit;
  }

  .title,
  .title a,
  h1, h2, h3, h4, h5, h6,
  .transition .name,
  .content h1.title a,
  .content h1 a,
  .content.thin h1.title a,
  .content.thin h1 a,
  .flux .website a,
  .post h1,
  .post h2 {
    color: var(--yl-color-text-default-emphasis);
    font-family: inherit;
  }

  .dropdown-menu {
    list-style: none;

    form .search {
      input {
        /* Mobile: Dropdown search input field */
        border-bottom-left-radius: 8px;
        border-top-left-radius: 8px;
        background-color: #303136;
        box-shadow: inset 0 0 0 1px hsla(0,0%,100%,.14);
        box-sizing: border-box;

        &:focus {
          outline: none;
          box-shadow: inset 0 0 0 2px hsla(0,0%,100%,.14);
        }
      }
      
      .btn[type="submit"] {
        /* Mobile: Dropdown search submit button */
        background: var(--yl-color-gradient-active);
  
        img {
          filter: brightness(5);
        }
      }
    }

    .help {
      font-size: var(--yl-text-sm);
      margin-top: var(--yl-m-sm);
    }
  }

  article .content figure figcaption {
    font-style: normal;
  }

  /* Input, button, and focus */
  input,
  select,
  textarea,
  button,
  .btn,
  kbd,
  input:focus,
  select:focus,
  textarea:focus,
  .nav_menu,
  .pagination .item,
  .nav_menu .btn {
    background-color: #303136;
    border-color: #303136;
    border-top-color: #303136;
    color: var(--yl-color-text-default);

    & .stick .btn,
    & .group .btn,
    & .stick .btn.read_all,
    & .group .btn.read_all,
    & .btn + .btn:not(.btn-important),
    & .btn + input,
    & .btn + .dropdown > .btn,
    & input + .btn,
    & input + input,
    & input + .dropdown > .btn,
    & .dropdown + .btn,
    & .dropdown + input,
    & .dropdown + .dropdown > .btn {
      background-color: #303136;
      border-color: #303136;
      border-top-color: #303136;
      color: var(--yl-color-text-default);
    }

    .icon {
      filter: brightness(1.6);
    }
  }


  /* Button hover */
  .btn:hover,
  .nav_menu .stick .btn:not(.active):hover,
  .nav_menu .group .btn:not(.active):hover,
  .nav_menu .stick .btn.read_all:hover,
  .nav_menu .group .btn.read_all:hover,
  .pagination .item:hover,
  .nav_menu .btn:hover,
  .nav-list .item a:hover {
    background-color: #424348;
  }

  #global {
    .btn.active,
    .btn-important {
      @include yl-gradient-btn-bg(#2761d5, #1b51bb);
    }
  }

  .dropdown-menu,
  .nav_menu .dropdown-menu button.as-link {
    --main-first: var(--yl-color-gradient-active); /* Header top right settings, hover background color */
  }

  .nav_menu {
    background-color: unset;
    border-color: unset;
    text-align: left;

    .stick .btn.active,
    .group .btn.active {
      @include yl-gradient-btn-bg(#2761d5, #1b51bb);

      .icon {
        filter: brightness(3);
      }
    }
  }

  /* Kbd Styles */
  kbd a {
    filter: brightness(1.6) saturate(0.8);
  }

  /* Disabled input */
  input:disabled,
  select:disabled {
    background-color: #303136;
    border-color: #303136;
    border-style: solid;
    background-image: repeating-linear-gradient(
      45deg,
      #303136,
      #303136 10px,
      #424348 10px,
      #424348 20px
    );
  }


  table th {
    background: hsl(0deg 0% 100% / 12%);
  }
}

/* ====================================
 * END "Dark mode: Global styles"
 * ==================================== */





/* ====================================
 * BEGIN "Dark mode: Dropdown, dialog, box"
 * ==================================== */

@media (max-width: 840px) {
  /* Mobile dropdown, with media query increase selector specificity */
  .dropdown-target:target ~ .dropdown-toggle::after {
    /* Mobile dropdown triangle */  
    background-color: #303136;
    border-color: #303136;
  }

  body:not(.reader) main#stream div.flux li.item.share,
  body:not(.reader) main#stream div.flux li.item.labels,
  .nav_menu #mark-read-menu,
  .nav_menu #nav_menu_actions,
  #nav_menu_sort,
  body:not(.reader) main#stream div.flux li.item.tags,
  #dropdown-search-wrapper {
     /** 
      * Turn dropdowns into bottom sheets on mobile
      * - Share button
      * - Playlists button (labels)
      * - Mark read button group within feed nav menu
      * - Feed actions button group within feed nav menu
      * - Sort button within feed nav menu
      * - youlag-inactive: Article tags button within article feeds items
      */

    .dropdown-toggle:after {
      /* Hide dropdown triangle on mobile */
      display: none;
    }

    li.item,
    li.item button {
      margin: 0;
      font-size: 1.4rem;

      label {
        padding: 10px;
        text-indent: 0;
      }

      input[type="checkbox"] {
        width: 1.4rem !important;
        height: 1.4rem !important;
        margin-right: 1rem;
      }
    }

    .dropdown-menu {
      /* Card dropdown menu on mobile */
      position: fixed;
      bottom: 0;
      height: calc(100vh - 50%);
      left: 0 !important;
      right: 0 !important;
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
      overflow: auto;
      animation: slideUp 0.15s ease-in-out forwards; /* Animate bottom sheet from bottom to up */

      @media (max-width: 8400px) {
        & + .dropdown-close {
          /* Mobile: FreshRSS dropdown background acts as an onblur, close function. */
          background: var(--frss-modal-background-color-transparent);
        }
      }


      &[role="radiogroup"] {
        li.item a {
          /* Add separation between check icon and label text. */
          display: flex;
          gap: 1rem;
          padding-left: var(--yl-p-xl);

          &::before {
            margin-left: calc(var(--yl-p-lg) * -1);
          }
        }
      }

      & > ul {
        overflow: auto;

        .item.addItem {
          /* Sticky "add new" playlist (label) */
          position: sticky;
          top: 0;
          margin-right: 0;
          padding-right: 0;
          width: unset;
          background-color: #303136;
        }
      }

      p.help {
        display: flex;
        flex-wrap: wrap;
        word-break: break-all;
        line-height: 1.4;
        justify-content: center;

        .btn {
          background-color: #424348;
        }

        .icon {
          display: none;
        }
      }
    }
  }

  .dropdown .dropdown-menu,
  .dropdown-target:target ~ .dropdown-menu {
    border-radius: 12px;
  }

  #dropdown-configure ~ .dropdown-menu {
    border-radius: unset;

    .toggle_aside {
      border: none;
    }
  }

  #overlay a.close {
    border: none;
  }

  #dropdown-search-wrapper.only-mobile {
    /* Mobile: Container for search button, place it on the top header, left to settings. */
    position: fixed;
    top: 7px;
    z-index: 50;
    right: 60px;
    
    #toggle-search {
      /* Mobile: Search button */
      border-radius: 50%;
      width: 40px;
      height: 40px;
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #26272a;

      img {
        filter: brightness(5);
      }
    }
  }


  .extension_smartmenu ul {
    list-style-position: inside;
    list-style-type: none;
  }

  #nav_menu_views_dropdown ul.dropdown-menu,
  #nav_menu_actions_dropdown ul.dropdown-men {
    .item a {
      width: 100%;
    }
  }
}

.tree .tree-folder .tree-folder-items .item.active .dropdown li a,
.dropdown .dropdown-menu .item a,
li.item.feed .item-title {
  color: var(--yl-color-text-default);
}

.dropdown {
  /* Dropdown menu styling. Displayed as bottom sheets on mobile. */
  position: relative;
}



  .dropdown-menu,
  .box {
    background-color: #303136;
    color: var(--yl-color-text-default);
    border-radius: 12px;
  
    .item.dropdown-section ~ .dropdown-section,
    .item.separator {
      border-top-color: #646464;
      border-bottom-color: #646464;
      border-color: #646464;
    }
  }

.dropdown:not(#dropdown-search-wrapper) {
  /* Add hover effect to dropdown items, while exluding e.g. #dropdown-search-wrapper */
  .dropdown-menu,
  .box {
    li.item {
      &:hover {
        background-color: hsla(0,0%,100%,.06);
      }
    }
  }
}

.box .box-title {
  background-color: #424348;
  color: var(--yl-color-text-default);

  .configure {
    border-radius: 8px;
  }
}

.box .box-content {
  .configure {
    border-radius: 8px;
  }
}


main#stream .box.category {
  .box-content {
    padding: var(--yl-p-sm);

    li.item.feed {
      border: none;

      a,
      a:hover {
        color: var(--yl-color-text-default);
      }
    }
  }

  .box-title a.title,
  .box-title a.title:hover {
    color: var(--yl-color-text-default);

    &:not([data-unread="0"]):after {
      background-color: rgba(137, 137, 137, 0.4392156863);
    }
  }
}


.box .box-title .icon,
.manage-list .icon,
.dropdown-header .icon,
.tree-folder-items .dropdown-toggle .icon,
.tree-folder-items .item.feed .dropdown-toggle .icon {
  filter: brightness(4);
}

.dropdown-menu input,
.dropdown-menu .btn,
.stick input + .btn {
  background-color: #424348;
  border-color: #424348;
}

main.prompt {
	background: #303136;
}

main.post {
  /* Subscription management page boxes */
  .box {
    border-radius: 12px;
    overflow: hidden;

    ul {
      list-style-position: inside;
    }

    .box-title {
      padding: var(--yl-p-sm);
    }

    .box-content {
      padding: var(--yl-p-sm);
      background-color: #292929;

      .item,
      .item.feed {
        border: none;

        a {
          filter: brightness(2); /* Quick fix for bad constrast link color. */
        }
      }

      .emptyCategory {
        .alert-warn {
          color: var(--yl-color-text-default);
          padding: var(--yl-p-2xs);
          border-radius: 8px;
          text-indent: 0;
        }
      }
    }

  }
}



#global #overlay {

  #panel {
    background: var(--yl-color-body-background);

    .flux.not_read:not(.current) {
      background: var(--yl-color-body-background);

      a {
        color: var(--yl-color-text-default);
      }
    }

    .flux .flux_header {
      border-color: #6464646b;
      padding: 1rem;
      box-sizing: border-box;

      &:hover {
        background: #252525;
      }
    }

    .flux .flux_header:hover:not(.current):hover .item .title {
        background: unset;
    }
  }
}




/* ====================================
 * END "Dark mode: Dropdown, dialog, box"
 * ==================================== */





/* ====================================
 * BEGIN "Dark mode: Feed side navigation"
 * ==================================== */

.tree {
  .tree-folder {
    border: none;
    margin: 0 8px;

    .tree-folder-title {
      display: flex;
      align-items: center;
      padding: var(--yl-p-xs);
      border-radius: 8px;
      text-transform: unset;
      font-size: var(--yl-sidenav-label-font-size);
      font-weight: normal;

      &:hover {
        text-decoration: none;
        background: var(--yl-color-gradient-surface-3); /* Hover effect */
      }

      img.icon {
        width: var(--yl-sidenav-icon-size);
        height: var(--yl-sidenav-icon-size);
        margin-right: var(--yl-sidenav-icon-label-gap);
        filter: brightness(3) !important; /* Prevent chevron icon from having its filter removed on hover */
      }

      button.dropdown-toggle {
        margin-right: 0;

        img.icon {
          /* Resize chevron icon utilizing padding, to keep global sidebar icon size untouched. */
          padding: 2px;
          box-sizing: border-box;

          &[src*="down.svg"] {
            /* Rotate chevron to point right when collapsed */
            transform: rotate(270deg);
          }

          &[src*="up.svg"] {
            /* Rotate chevron to point down when expanded */
            transform: rotate(180deg);
          }
        }
      }
    }

    &.active .tree-folder-title {
      background: var(--yl-color-gradient-surface-3); /* Active state */
    }


    ul.tree-folder-items {
      background-color: unset;

      li.item {
        border-radius: 6px;
        background-color: unset;
        display: list-item !important; /* Always display all labels on side navigation expand */
        font-size: var(--yl-sidenav-sublabel-font-size);

        &:hover {
          background-color: #303136;
        }

        a.dropdown-toggle {
          width: var(--yl-sidenav-icon-size);
          padding-right: 10px;
          padding-left: 15px;
        }

        a.item-title {
          padding-left: 15px;
          width: calc(100% - 70px);

          &:not(.active) {
            padding-left: 62px;
          }

          img.favicon {
            width: 18px;
            height: 18px;
            margin-right: 8px;
          }

          &:has(img.favicon) {
            padding-left: 15px;
          }

          &:not([data-unread="0"]) {
            width: calc(100% - 110px);
            font-weight: normal;
            letter-spacing: 0.5px;
          }

        }
      }
    }
  }

  li.tree-folder.category {
    &.tags {
      .item.feed a.item-title {

        @media (min-width: 841px) {
          &:not(.active) {
            padding-left: 15px;
          }
        }
      }
    }
  }
}


.flux {
  font-family: inherit;

  .flux_header {
    .item {
      .title {
        color: var(--yl-color-text-read);
      }

      .date {
        color: #898989;
      }
    }

  }

  .flux_content {
    .bottom {
      .date {
        color: #898989;
      }
    }
  }

  .flux_header .item,
  .flux_content > footer {
    .icon.loading,
    .icon.spinner {
      background: var(--yl-loading-spinner-background-image) center center no-repeat;
      background-size: 1rem; /* Allow `var(--yl-loading-spinner-background-image)` to size correctly for the button containers. */
      object-position: -9999px 0; /* Hide FreshRSS' default loading icon by positioning it x-coordinate: -9999px. */
    }
  }

  .title {
    color: var(--yl-color-text-read);
  }

  &.not_read {
    .item {
      .title {
        color: var(--yl-color-text-default-emphasis);
      }

      .date {
        color: hsl(0deg 0% 100% / 59%);
      }
    }
  }
}

#aside_feed.aside {
  border-right: 1px solid color-mix(in oklab, #fff 11%, transparent);

  @media (min-width: 841px) {

    & > * {
      /* On desktop, prevent side navigation to stretch when main content isn't loaded, caused by the layout relying on "display: table" */
      max-width: var(--yl-sidenav-width);
    }
  }

  a.toggle_aside {
    border: none;
  }

  .category .title:not([data-unread="0"]):after,
  .tree .tree-folder ul.tree-folder-items li.item a:after,
  .tree .tree-folder ul.tree-folder-items li.item.active a:after {
    top: 50%;
    transform: translateY(-50%);
    margin: 0;
    font-weight: bold;
    font-size: var(--yl-text-3xs);
    padding-left: var(--yl-p-3xs);
    padding-right: var(--yl-p-3xs);
    border: 1px solid rgb(255 255 255 / 14%);
    @include yl-gradient-btn-bg(#343434, #303030);
  }

  .tree .tree-folder ul.tree-folder-items li.item.active a:after,
  .tree .tree-folder ul.tree-folder-items li.item a:after {
    background: transparent;
  }

  .category.important .title:not([data-unread="0"]):after {
    background-color: unset;
    background: linear-gradient(to bottom, color-mix(in oklab, #ff6a00 35%, transparent), color-mix(in oklab, #e3000b 60%, transparent));
    border: 1px solid color-mix(in oklab, #db511cd6 30%, transparent);
  }
}

.tree#sidebar {
  padding-top: 0;
  margin-top: 0;
}

/** 
 * Highlight only current page in the side navigation, remove highlight from folder if item is active:
 * - Playlists ("My labels")
 * - User's category
 */
#tags:has(> ul.tree-folder-items.active .item.feed.active) > .tree-folder-title,
[id^="c_"].tree-folder.category.active:has(> ul.tree-folder-items.active .item.feed.active) > .tree-folder-title {
  background-color: unset;
}


/* ====================================
 * END "Dark mode: Side navigation"
 * ==================================== */





/* ====================================
 * BEGIN "Dark mode: Settings side navigation"
 * ==================================== */

/* Settings page side nav */
body:not(.normal) {
  .nav.nav-list.aside {
    padding-top: 2rem;

    .item.nav-section {

      li.item {
        margin: 0 8px;
        border-radius: 12px;
        min-height: 1rem;
        line-height: 1;

        &.active,
        &.active a,
        &:hover,
        &:hover a {
          background-color: #303136;
          background: var(--yl-color-gradient-surface-3);
          max-width: calc(100% - 1rem);
        }
      }

      li.item a {
        padding: 16px;
        line-height: 1;
        font-size: 1.2rem;
      }

    }

  }
}


/* Settings page back button */ 
.post a[href="./"] {
  background-color: #303136;
  border-color: #303136;
  color: var(--yl-color-text-default);
}

/* ====================================
 * END "Dark mode: Settings side navigation"
 * ==================================== */






/* ====================================
 * BEGIN "Dark mode: Card"
 * ==================================== */

body.youlag-active.youlag-video-unread-badge:not(.reader) main#stream {

  div.flux {
    &.not_read {
      position: relative;
      background-color: unset;

      &:after {
        content: "New";
        position: absolute;
        top: 18px;
        left: 18px;
        padding: 3px 10px;
        background: linear-gradient(to bottom, color-mix(in oklab, #845532 35%, transparent), color-mix(in oklab, #8e2d07 60%, transparent));
        background-color: rgba(157, 12, 12, 0.6);
        border: 1px solid color-mix(in oklab, #db511cd6 30%, transparent);
        box-shadow: 0 2px 8px 3px hsl(0deg 0% 0% / 13%);
        border-radius: 99px;
        font-size: var(--yl-text-2xs);
        font-weight: bold;
        pointer-events: none;
        z-index: 1;
      }
    }
  }
}

body.youlag-inactive:not(.reader) {

  nav.aside_feed {
    &.visible ~ .nav_menu {
      max-width: calc(900px + var(--yl-sidenav-width) + var(--yl-p-md) + var(--yl-p-md)); /* youlag-inactive: Match position of article */
      margin: 0 auto;
    }
  
    &.visible ~ main#stream {
      /* Desktop: sidenav opened */
      max-width: calc(900px + var(--yl-sidenav-width) + var(--yl-p-md) + var(--yl-p-md)); /* youlag-inactive: Articles will effectively be max 900px */
    }
  }

}


body.youlag-inactive:not(.reader) main#stream {
  margin: 0 auto;
  padding-left: var(--yl-p-sm);
  padding-right: var(--yl-p-sm);
  max-width: 900px;

  @media (max-width: 840px) {
    padding: 0;

    .transition {
      @media (max-width: 840px) {
        padding-right: var(--yl-p-sm) !important;
      }

      .name {
        padding-left: var(--yl-p-sm) !important; /* youlag-inactive: Align category name article thumbnail. */
        box-sizing: border-box;
      }
    }
  }

  div.flux {
    border-radius: 12px;
    transition: all 0.1s;
    margin-bottom: var(--yl-m-xs);

    @media (max-width: 840px) {
      margin-bottom: 0;
      border-radius: 0;
    }

    &.active.current {
      /* youlag-inactive: article is opened */
      
      ul.flux_header {
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
      }
    }

    &.current {
      /* youlag-inactive: article is in focus */
      border-left: none; /* Disable default blue/orange and  border indicator of focused feed item */
    }

    &.favorite,
    &.favorite.not_read {
      background: linear-gradient(135deg, #50310d 0%, #22170b 40%, #3d2b18 100%); /* Orange glow effect for favorite articles */
    }

    &:hover ul.flux_header {
      .titleAuthorSummaryDate .title {
        /* FreshRSS shrinks the padding-right from '155px' to '0.5rem' on hover.
           Force it to remain the same to avoid layout shift. */
        padding-right: 155px;
      }
    }

    ul.flux_header {
      display: flex;
      flex-wrap: wrap;
      border: 1px solid color-mix(in oklab,#fff 11%,transparent);
      border-radius: 14px;
      box-sizing: border-box;
      padding: var(--yl-p-2xs) var(--yl-p-2xs);
      margin: 0;

      @media (max-width: 840px) {
        border-radius: 0;
        border-bottom: none;
        border-left: none;
        border-right: none;
      }

      @media (max-width: 600px) {
        --yl-article-thumbnail-width: 80px;
      }

      &.not_read {
        .item .title {
          font-weight: 600;
        }
      }

      .item {
        /* Mobile, youlag-inactive: provide enough spacing between icons */
        &.manage,
        &.labels,
        &.link,
        &.share {
          display: flex;
          align-items: center;
          justify-content: center;
          width: auto;
          padding: 0;

          & > a,
          & > div a {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--yl-p-3xs);
            width: 32px;
            height: 24px;
            border: 1px solid hsla(0, 0%, 100%, .08);
            border-radius: 12px;
            margin-left: 8px;
            background-color: rgba(255, 255, 255, 0.04);

            &:hover {
              background-color: hsla(0, 0%, 100%, .08);
            }
          }
        }

        &.manage {
          order: 3;
        }

        &:first-child {
          padding-left: 0;
        }

        @media (max-width: 840px) {
        }

        &.thumbnail {
          /* Place thumbnail first. */
          order: -3;
          box-sizing: border-box;
          padding: 0;
          position: relative;
          width: var(--yl-article-thumbnail-width);
          height: 90px;
          background: rgb(255 255 255 / 7%);
          border-radius: 8px;
          overflow: hidden;
          margin-top: var(--yl-m-3xs);
          margin-bottom: var(--yl-m-3xs);
          margin-left: var(--yl-m-2xs);
          margin-right: var(--yl-m-2xs);

          @media (max-width: 600px) {
            height: var(--yl-article-thumbnail-width);
            max-height: 100%;
          }

          &:before {
            content: "";
            background-image: url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjZmZmZmZmIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHZpZXdCb3g9IjAgMCA0OTAuMDgyIDQ5MC4wODIiPjxwYXRoIGQ9Ik00NTAuOTkxIDBoLTQxMS44Yy0yMC45IDAtMzguNiAxNi43LTM4LjYgMzguNnYyNzMuMWMwIDIwLjkgMTYuNyAzOC42IDM4LjYgMzguNmgyNXYxMTkuOWMwIDguMyA1LjIgMTUuNiAxMi41IDE4LjggMi4xIDEgMTQuOSAzLjQgMjIuOS01LjJsMTI3LjItMTM0LjVoMjI0LjFjMjAuOSAwIDM4LjYtMTYuNyAzOC42LTM4LjZWMzguNmMuMS0yMC45LTE2LjYtMzguNi0zOC41LTM4LjZtLTEgMzA5LjZoLTIzMS41Yy01LjIgMC0xMC40IDIuMS0xNC42IDYuM2wtOTkgMTAzLjJ2LTg4LjZjMC0xMS41LTkuNC0yMC45LTIwLjktMjAuOWgtNDIuN3YtMjY5aDQwOC43eiIvPjwvc3ZnPg==);
            background-repeat: no-repeat;
            background-size: 32px;
            background-position: center;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0.24;
            z-index: 0;
          }

          img {
            position: relative;
            z-index: 1;
          }
        }

        &.titleAuthorSummaryDate {
          order: -2; /* Place headline and description next to thumbnail. */
          display: flex;
          align-items: flex-start;
          justify-content: flex-start;
          align-content: baseline;
          column-gap: var(--yl-m-2xs);
          flex-wrap: wrap;
          flex-basis: calc(100% - var(--yl-article-thumbnail-width) - (var(--yl-m-2xs) * 2));
          padding: var(--yl-p-3xs) var(--yl-p-2xs) 0 var(--yl-p-2xs);
          box-sizing: border-box;

          @media (max-width: 291px) {
            flex-basis: 100%;
          }

          .title,
          .title.multiline {
            order: -2; /* Place headline first within container. */
            flex: 1;
            /* Force headline to allow 2 rows of text */
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            overflow: hidden;
            text-overflow: ellipsis;
            min-width: unset;
            text-wrap: auto;
            position: relative;
            max-height: calc(var(--yl-text-xs) * 5.5);
            font-size: calc(var(--yl-text-sm) / 1.1);
            line-height: 1.38;
            box-sizing: border-box;
            padding: 0;

            @media (max-width: 840px) {
              flex-basis: 100%;
              font-size: var(--yl-text-sm);
            }

            .author {
              display: block;
              padding: 0;
              margin-top: 4px;
              display: none; /* youlag-inactive: hide author from article preview. */
            }
          }

          .summary {
            --frss-font-color-grey-dark: #898989;
            margin: var(--yl-m-3xs) 0 0 0;
            flex-basis: 100%;
            max-width: unset;
            padding-right: min(var(--yl-p-3xl), 10%);
            font-size: var(--yl-text-xs);
            line-height: 1.2;

            @media (max-width: 840px) {
              flex-basis: 100%;
              font-size: var(--yl-text-xs);
              padding-right: unset;
              /* Mobile: Override FreshRSS 'line-clamp:2' */
              -webkit-line-clamp: 1;
              line-clamp: 1;
            }
          }

          .date {
            order: -1; /* Place headline and date next to each other. */
            /* Reset styling */
            padding-bottom: 0;
            line-height: 1;
            position: static;
            top: unset;
            right: unset;
            width: auto;
            z-index: auto;

            @media (max-width: 840px) {
              order: -3; /* Mobile: Place date below headline */
              display: block; /* Force display on mobile. */
              padding-bottom: var(--yl-m-3xs);
            }
          }
        }

        &.website {
          /* Place website icon and name to the far right. */
          order: 4;
          margin-left: auto;
          width: auto;

          &, a {
            display: flex;
            align-items: center;

            &:hover {
              .favicon {
                filter: unset; /* Disable greyscale effect on website icon hover */
              }
              
              .websiteName {
                opacity: 1;
                /* Underline workaround, since the websiteName has 'overflow:hidden','text-decoration:underline' can't be applied. */
                box-shadow: #fff 0 -1px 0 inset;
              }
            }
          }

          .websiteName {
            max-width: 140px;
            display: inline-block;
            overflow: hidden;
            text-overflow: ellipsis;
            line-height: 1;
            font-size: var(--yl-text-xs);
            opacity: 0.7;
          }

          @media (max-width: 840px) {
            width: unset;
            max-width: 200px;

            .websiteName {
              font-size: var(--yl-text-2xs);
            }
          }

          a {
            text-decoration: none;
          }
        }

      }

      .item.manage {
        &:has(.item-element.bookmark) {
          order: -1; /* youlag-inactive: Place favorite first in the bottom row. */
        }

        a.item-element.bookmark {
          /* youlag-inactive: Remove ellipsis from being added on 'favorite' icon.  */
          text-overflow: unset;

          img.icon[src$="icons/starred.svg"] {
            filter: brightness(1.5) sepia(1) hue-rotate(-25deg) saturate(4) contrast(1.2);
          }
        }
      }
    }

    &.not_read {
      /* youlag-inactive: Unread items background color. */
      background-color: #26272a;
      background: linear-gradient(135deg, #303030 0%, #151517 40%, #2d2d2d 100%);

      ul.flux_header {
        .summary {
          --frss-font-color-grey-dark: #b7b7b7;
        }
      }
    }

    &.active.current {
      /* youlag-inactive: expanaded feed item. */

      .flux_content {
        background-color: #26272a;
        background: linear-gradient(135deg, #303030 0%, #232323 40%, #181818 100%);
        border-bottom-left-radius: 12px;
        border-bottom-right-radius: 12px;
        
        header {
          h1.title a {

            &:hover {
              color: var(--yl-color-text-default);
              text-decoration: underline;
            }
          }
        }

        @media (max-width: 600px) {
          h1.title {
            /* Mobile: Reduce title size to reduce vertical space */
            line-height: 1.2;

            a {
              font-size: var(--yl-text-md);
            }
          }
        }

        .subtitle {
          .author {
            --light-font-color: #AAAAAA;
            /* youlag-inactive: add spacing between 'By:' and 'author name'. */
            display: inline-flex;
            gap: 4px;
          }
        }

        .text {
          pre {
            background-color: rgba(255,255,255,0.1);
            border-radius: 12px;
          }
        }

        video {
          height: auto;
        }

        hr {
          margin: var(--yl-m-xs) 0;
          border-color: rgba(255,255,255,0.15);
        }

        h1, h2, h3, h4, h5, h6 {
          margin: var(--yl-m-lg) 0 var(--yl-m-xs) 0;
        }
      }

      .content {
        .text a,
        footer .link-tag {
          /* youlag-inactive: article content links. */
          color: var(--yl-color-text-default);
          box-shadow: var(--yl-color-text-default) 0 -1px 0 inset;
        }
      }

      footer ul.horizontal-list.bottom,
      .content header .subtitle {
        a {
          /* youlag-inactive: Increase legibilty of blue-colored links in opened articles. */
          filter: brightness(1.6);
        }
      }

      footer .tags {
        align-items: center;
      }
    }

  }
}

body.youlag-inactive.yl-page-watch_later:not(.reader) main#stream {
  /* youlag-inactive: Favorites (Watch later) page */

  div.flux {
    &.favorite {
      background: none; /* Revert to normal background on favorites (watch later) page */
      
      &.not_read {
        background: linear-gradient(135deg, #303030 0%, #151517 40%, #2d2d2d 100%);
      }

      li.item.manage {
        /* youlag-inactive: Actions button hover effect have not yet been setup for article feed view, 
           so to keep it consistent, disable background on hover for favorite button (which is a consequence 
           of youlag global styling. */
        background: none !important;
      }
      a.item-element.bookmark {
        /* On youlag-active interface, actions buttons/icons are normally hidden on desktop view. 
           Force it to show on youlag-inactive article feed view. */
        visibility: visible !important;
      }
    }
  }
}

body.youlag-active.yl-page-watch_later:not(.reader) main#stream {
  div.flux {
    &.favorite {
      background: none !important; /* Revert to normal background on favorites (watch later) page */

      @media (max-width: 840px) {
        background: linear-gradient(209deg, #4d4b4b 0%, #212124 40%, #333 100%) !important;
      }

      &:hover {
        background: linear-gradient(209deg, #4d4b4b 0%, #212124 40%, #333 100%) !important;
      }
    }
  }
}

body.youlag-active:not(.reader) main#stream {
  div.flux {
    @media (max-width: 840px) {
      &:not(.active),
      &:not(.active).favorite:not(.current) {
        /* Mobile, youlag-active:, always display hover effect/background */
        background: linear-gradient(209deg, #4d4b4b 0%, #212124 40%, #333 100%);;
      }
    }
  }
}

body:not(.reader) main#stream {
  div.flux {
    background: transparent;
    ul.horizontal-list.flux_header {

      &:hover {
        --grey-lighter: #252525;

        .item .title {
          background: transparent !important;        
        }
      }
    }

    &:not(.active):hover {
      /* Card hover effect/background */
      background: linear-gradient(209deg, #4d4b4b 0%, #212124 40%, #333 100%);
    }

    &.active.current .flux_header {
      background-color: hsl(0deg 2.56% 15.29%); /* Card opened state */
    }

    .flux_header {
      li.item.manage,
      li.item.website.icon,
      li.item.link,
      li.item.labels,
      li.item.share {
        background-color: unset;
      }
    }
  }

  div.flux:not(.favorite) .flux_header li.item.manage .item-element.bookmark img,
  div.flux:not(.not_read) .flux_header li.item.manage .item-element.read img,
  div.flux .flux_header li.item.link img,
  div.flux .flux_header li.item.labels img,
  div.flux .flux_header li.item.share img
   {
    filter: brightness(1.6);
  }

  div.flux.not_read .flux_header li.item.manage .item-element.read img {
    filter: grayscale(1) brightness(1.4);
  }

}


main#stream,
#overlay #panel {
  button#bigMarkAsRead {
    @include yl-gradient-bg(#0058e6, #0b38c0);
    color: var(--yl-color-text-default);
    transition: 0.1s;

    .bigTick {
      filter: brightness(5);
      opacity: 0.9;
    }

    &:hover {

      .bigTick {
        opacity: 1;
      }
    }
  }
}

#new-article {
  /* Feed updated notification banner */
  position: sticky;
  top: var(--yl-m-2xs);
  z-index: 20;
  grid-column: 1 / -1;
  margin: var(--yl-m-sm) 0;
  overflow: hidden;
  background: unset;
  margin-left: 0;
  padding-right: 0;

  @media (max-width: 840px) {
    top: calc(54px + var(--yl-m-2xs)); /* Account for mobile top nav height */
    margin: 0 var(--yl-m-xs);
    margin-top: 0;
    margin-left: var(--yl-m-xs);
    margin-right: var(--yl-m-xs);
    margin-bottom: var(--yl-m-sm); /* Prevent getting overlapped by transition (category) title. */
  }

  a {
    @include yl-gradient-bg(#efd01c, #c29903);
    border-radius: 8px;
    padding: var(--yl-p-xs);
  }
}

#notification,
#actualizeProgress {
  /* #nofication: general notification */
  /* #actualizeProgress: feed update progress */

  border-radius: 12px;
  margin: var(--yl-m-xs);
  max-width: calc(100% - var(--yl-m-xs) * 2);

  &.good {
    @include yl-gradient-bg(#1cef6d, #0a9d2a);
  }

  &.bad {
    @include yl-gradient-bg(#fb2424, #b90d0d);
  }

  button.close {
    border-radius: 12px;

    img.icon {
      height: 24px;
      width: 24px;
    }
  }
}

.alert {
  &.alert-error {
    /* FreshRSS error container: https://example.com/i/?c=error */
    @include yl-gradient-bg(#fb2424, #b90d0d, false);
    color: var(--yl-color-text-default);
    border-radius: 12px;
  }

  &.alert-success {
    @include yl-gradient-bg(#1cef6d, #0a9d2a, false);
    color: var(--yl-color-text-default);
    border-radius: 12px;
  }

  &.alert-warn {
    @include yl-gradient-bg(#efd01c, #c29903, false);
    color: var(--yl-color-text-default);
    border-radius: 12px;
  }
}

/* ====================================
 * END "Dark mode: Card"
 * ==================================== */


/*****************************************
 * END "MAPCO THEME DARK MODE"
 ****************************************/







/*****************************************
 *
 * BEGIN "CARD EXPANDED - INLINE VIEW MODE"
 *
 * Expand cards inline without covering
 * the entire screen. Used as a fallback 
 * when "Theater mode" is removed.
 *
 ****************************************/

.youlag-active {
  main#stream div.flux.active.current {
    /* Card content on expanded inline view */
    grid-column: 1 / -1;
    max-height: calc(100vh - 275px);
    overflow: auto;
  
    @media (max-height: 900px) {
      /* When viewport height is small, card expands to full height on inline view. */
      height: 100vh;
      max-height: 100vh;
    }
  
    @media (max-width: 840px) {
      /* Card expands to full height on mobile by default for inline view */
      height: 100vh;
      max-height: 100vh;
    }
  }
}

/*****************************************
 * END "CARD EXPANDED - INLINE VIEW MODE"
 ****************************************/









/*****************************************
 *
 * BEGIN "FAVORITES PAGE"
 *
 * Applies dark mode to the "Mapco" theme.
 * Content within `<main />` is usually 
 * light mode; this styling switches it to 
 * dark mode, along with the left side 
 * navigation.
 *
 ****************************************/

body:has(.tree-folder.category.favorites.active) {
  main#stream div.flux.favorite:not(.active) {
    .flux_header {
      li.item.manage:has(.item-element.bookmark) {
        /* In "Favorites", do not use special highlight effect. */
        background-color: inherit;

        /* In "Favorites", use regular special hover color. */
        &:hover {
          background-color: hsl(0deg 0% 100% / 8%);
        }
      }
    }
    .flux_header:not(:hover)  {

      a.bookmark {
        /* In "Favorites", hide by favorites icon by default; behave like other icons. */
        visibility: hidden;
      }
    }
  }
}

/*****************************************
 * END "FAVORITES PAGE"
 ****************************************/







/*****************************************
 *
 * BEGIN "READER VIEW PAGE"
 *
 ****************************************/


#stream.reader .flux {
  border-bottom: 1px solid #646464;

  &,
  .content{
    background: var(--yl-color-body-background);
  }

  &,
  .text {
    color: var(--yl-color-text-default);
  }

  .go_website {
    font-family: Arial, Helvetica, sans-serif;
  }

  .flux_content {
    background: var(--yl-color-body-background);
  }
}

/*****************************************
 * END "READER VIEW PAGE"
 ****************************************/





/*****************************************
 *
 * BEGIN "
 * - YOULAG THEATER VIEW MODAL"
 *
 ****************************************/

@keyframes slideUp {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0%);
  }
}

/*****************************************
 * END "ANIMATION KEYFRAMES"
 ****************************************/




/*****************************************
 *
 * BEGIN "YOULAG THEATER VIEW MODAL"
 * 
 * 2025-02-22: Big refactor to move away
 * from relying on CSS to display theater
 * mode. Instead, use the script to handle
 * the view and functionality.
 *
 ****************************************/

.youlag-active {
  main#stream > .flux {
    cursor: pointer;
  }
}

.youlag-mode--fullscreen {
  overflow: hidden;
}

.youlag-mode--pip {
  overflow: auto;

  #youlagTheaterModal {
    transition: .2s; /* Time to minimize to mini video player */
  }

  @media (max-width: 840px) {
    &:has(#nav_entries) #youlagTheaterModal {
      /* Mobile: Place pip video above bottom navigation bar. */
      bottom: calc(4.5rem + var(--yl-m-sm)); /* 4.5rem = height of bottom navigation bar */
    }
  }
}
 
body {
  /* Youlag loading spinner */
  &:has(#global main#stream):before {
    /* Loading spinner, before the youlag script has fully loaded. Only on feed stream pages. */
    content: "Loading";
    position: fixed;
    top: 89px;
    left: 50%;
    width: 260px;
    height: 62px;
    backdrop-filter: blur(60px);
    box-shadow: inset -8px 4px 70px 0px hsla(0, 0%, 100%, .1137254902);
    border: 1px solid color-mix(in oklab,#ffffff 28%,transparent);
    background-image: var(--yl-loading-spinner-background-image);
    background-repeat: no-repeat;
    background-position: 82px;
    background-size: 18px;
    z-index: 9999;
    transition: opacity 0.2s;
    color: var(--yl-color-text-default);
    display: flex;
    justify-content: flex-start;
    align-items: center;
    padding-left: 111px;
    box-sizing: border-box;
    font-family: arial;
    font-size: var(--yl-text-xs);
    letter-spacing: 1px;
    white-space: pre;
    pointer-events: none;
    border-radius: 12px;
    opacity: 0;
    animation-name: fade-in--youlag-loading;
    animation-duration: 2s ease-in-out 1s forwards;
    animation-timing-function: ease-in-out;
    animation-delay: 1s;
    animation-fill-mode: forwards;

    @media (max-width: 840px) {
      width: calc(100% - var(--yl-p-sm) * 2);
      left: var(--yl-p-sm);
      overflow: hidden;
      padding-left: 40%;
      background-position: calc(40% - 8px);
    }
  }

  /* Display only the youlag loading on non-settings page, that is, feed pages. */
  #global {
    position: relative;
    overflow-x: hidden;

    &:after {
      /* before youlag-loaded: Black backdrop to hide feed content while loading Youlag script. */
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      height: 100%;
      width: calc(100% - var(--yl-sidenav-width));
      margin-left: var(--yl-sidenav-width); /* To display the sidenav while loading Youlag */
      box-sizing: border-box;
      background: var(--yl-color-body-background);
      background: rgb(25 25 25 / 80%);
      z-index: 40;
      transition: 0.2s;
      opacity: 1;
      backdrop-filter: blur(40px);

      @media (max-width: 840px) {
        width: 100%;
        margin-left: 0;
      }
    }

    @media (max-width: 840px) {
      padding-top: 54px; /* Mobile: Height of top navigation bar, to avoid fixed top header to cover content underneath. */
    }
  }

  &.youlag-loaded {
    /* Youlag script has loaded, remove loading spinner and feed overlay. */
    &:before {
      display: none !important;
    }
  
    #global {
      &:after {
        /* youlag-loaded: Remove black backdrop after Youlag script has loaded. */
        display: none !important;
      }
    }
  }

  &.profile,
  &.display,
  &.reading,
  &.archiving,
  &.integration,
  &.shortcut,
  &.queries,
  &.index,
  &.privacy,
  &.system,
  &.manage,
  &.checkInstall,
  &.logs,
  &.about {
    #global {
      &:after {
        /* Disable youlag loading overlay on settings pages. */
        display: none;
      }
    }
  }
}


#youlagTheaterModal {
  position: fixed;
  z-index: 99999;
  bottom: 0px;
  right: 0px;
  height: 100vh;
  height: 100dvh;
  width: 100vw;
  background: #060606;
  overflow-y: auto;
  overflow-x: hidden;
  box-sizing: border-box;
  transition: 0.3s; /* Time to restore to fullscreen */
  will-change: width, height, transform;
  /* For browsers with subpixel rendering issues, hide background content peeking through. */
  box-shadow: 0 0 0 10px #060606;
  transform-origin: bottom right;

  &.youlag-modal-feed-item--text {
    /* For feed items that are not video feeds. */
    .youlag-iframe-container {
      display: none;
    }

    .youlag-video-container {
      /* For text feeds, the thumbnail is displayed in the video area instead. */
      max-height: 50vh;

      .youlag-thumbnail-container {
        animation: none !important;
        width: 100% !important;
        height: auto !important;
        padding-bottom: 0 !important;
        
        .youlag-video-thumbnail {
          position: static !important;
          transform: none !important;
        }
      }
    }



    .youlag-video-description-content {
      margin: 0 auto;

      a {
        color: #dadada;
        box-shadow: #fff 0 -1px 0 inset;
      }

      ul {
        list-style-position: inside;
      }

      img {
        border-radius: 8px;
      }

      pre {
        overflow: auto;
        background-color: #ffffff1c;
        border-radius: 8px;
        padding: 1rem;
      }
    }
  }
}

.youlag-theater-modal-container {
  width: 100%;
}

.youlag-theater-modal-content {
  width: 100%;
}

.youlag-video-header {
  display: flex;
  gap: var(--yl-m-3xs);
  position: sticky;
  top: 0;
  left: 0;
  z-index: 1;
  display: flex;
  justify-content: flex-end;
  padding: var(--yl-p-xs);
  background: linear-gradient(to bottom, black 0%, transparent 100%);
}

#youlagVideoSource {
  margin-right: auto;
  border-radius: 12px;
  padding-right: var(--yl-p-sm);
  padding-left: var(--yl-p-sm);
}

.youlag-video-container {
  position: relative;
  max-height: 80vh;
  overflow: hidden;

  .youlag-iframe-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
  
    .youlag-iframe {
      width: 100%;
      height: auto;
      max-height: 80vh;
      aspect-ratio: 16 / 9;
      overflow: hidden;
    }  
  }
  
  .youlag-thumbnail-container {
    width: 100%;
    height: 0;
    /* Use this method of setting 16:9 aspect ratio, due to a subpixel peaking below the iframe that sits on top. */
    padding-bottom: calc(56.25% - 1px); 
    position: relative;
    overflow: hidden;
    animation: pulse 4s infinite ease-in-out;
  
  
    .youlag-video-thumbnail {
      position: absolute;
      top: 50%;
      left: 0;
      width: 100%;
      transform: translateY(-50%);
    }
  }
}


.youlag-video-details {
  padding-top: var(--yl-p-xs);
  padding-left: var(--yl-p-md);
  padding-right: var(--yl-p-md);

  .youlag-video-metadata-container {
    margin-bottom: var(--yl-m-lg);

    .youlag-video-metadata-title {
      font-size: 1.4rem;
      line-height: 1.4;
      margin-bottom: var(--yl-m-sm);
    }

    .youlag-video-metadata-favicon {
      width: 42px;
      height: 42px;
      background-color: hsla(0, 0%, 100%, .18);
      padding: 8px;
      box-sizing: border-box;
      border-radius: 50%;
      margin-top: 2px;

      &[src=""] {
        display: none;
      }
    }
  }
}


.youlag-video-metadata-panel {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--yl-m-sm);
  margin-bottom: var(--yl-m-md);

  .youlag-video-author-section {
    display: flex;
    flex: 1;
    gap: var(--yl-m-2xs);
    align-items: center;
    min-width: 400px;


    .youlag-video-metadata-author a {
      font-size: var(--yl-text-sm);
      line-height: 1.66;
      font-weight: 600;
      color: var(--yl-color-text-default);
    }
  
    .youlag-video-metadata-date {
      font-size: var(--yl-text-xs);
      line-height: 1;
      opacity: 0.8;
    }
  }

  .youlag-video-actions-container {
    display: flex;
    gap: var(--yl-m-2xs);
    flex-wrap: wrap;
  }
}

.youlag-video-metadata-favicon-link {
  display: flex;
  align-items: center;

  &:has(.youlag-video-metadata-favicon[src=""]) {
    display: none;
  }
}

.youlag-favorited {
  min-width: 60px;

  &.youlag-favorited--false .youlag-favorited-icon {
    background-image: url('../themes/Mapco/icons/non-starred.svg');
    filter: brightness(1.6);
  }
  
  &.youlag-favorited--true .youlag-favorited-icon {
    background-image: url('../themes/Mapco/icons/starred.svg');
    filter: brightness(1.5) sepia(1) hue-rotate(-25deg) saturate(4) contrast(1.2);
  }

  .youlag-favorited-icon {
    width: 20px;
    height: 20px;
    filter: invert(1);
    background-repeat: no-repeat;
    background-position: center;
    width: 100%;
  }  
}



.youlag-video-description-container {
  background: linear-gradient(135deg, #303030 0%, #232323 40%, #181818 100%);
  margin-bottom: var(--yl-m-lg);
  padding: var(--yl-p-sm);
  border-radius: 1rem;

  .youlag-video-description-content {
    font-size: var(--yl-text-sm);
    word-break: break-word;
    max-width: 700px;

    a {
      color: #dadada;
      box-shadow: #fff 0 -1px 0 inset;
    }
  }

  &:has(.youlag-video-description-content:empty) {
    /* Hide description container if no description within content. */
    display: none;
  }
}



a.yl-video-action-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background-color: #303136;
  color: var(--yl-color-text-default);
  font-weight: 600;
  font-size: var(--yl-text-xs);
  border-radius: 14px;
  padding: var(--yl-p-xs) var(--yl-p-sm);
  text-decoration: none;
  transition: background-color 0.2s;
  min-width: 45px;

  &:hover {
    text-decoration: none;
    background-color: #424348;
  }

  span.yl-video-action-button__icon {
    margin-right: var(--yl-m-2xs);
  }
  
  .icon {
    filter: brightness(2);
  }
}


.yl-video-action-button-group {
  /* For placing related buttons into one group */
  display: flex;
  border-radius: 999px;
  overflow: hidden;

  a.yl-video-action-button {
    /* Reset rounded corners of buttons in group */
    border-radius: 0;
  }

  .yl-video-action-button:first-child {
    border-top-left-radius: 999px;
    border-bottom-left-radius: 999px;
  }

  .yl-video-action-button:last-child {
    border-top-right-radius: 999px;
    border-bottom-right-radius: 999px;
  }

  .yl-video-action-button:not(:last-child) {
    border-right: 1px solid rgba(255, 255, 255, 0.26);
  }

  .yl-video-action-button:only-child {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
    border: none;
  }
}

a.yl-video-action-button[href=""] {
  /* Hide button if no link was able to be fetched */
  display: none;
}


#youlagCloseModal,
#youlagMinimizeModal {
  cursor: pointer;
  padding: var(--yl-p-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  line-height: 1;
  border-radius: 999px;
  width: 40px;
  height: 40px;
  font-size: var(--yl-text-lg);
  background-color: #303136;
  box-shadow: 0px 4px 8px 0px rgba(0, 0, 0, 0.4);
  transition: background-color 0.2s;

  &:hover {
    background-color: #424348;
  }
}

#youlagMinimizeModal {
  font-size: var(--yl-text-md);
}

/*****************************************
 * END "YOULAG THEATER VIEW MODAL"
 ****************************************/



/*****************************************
 * BEGIN "YOULAG THEATER PIP VIEW"
 * Picture-in-picture mode
 ****************************************/

.youlag-mode--pip #youlagTheaterModal {
  overflow: hidden;
  z-index: 50;

  & {
    width: var(--yl-video-pip-width);
    bottom: var(--yl-m-sm);
    right: var(--yl-m-sm);
    aspect-ratio: 16 / 9;
    height: auto;
    border-radius: 12px;
    background: #303136;
    box-shadow: 0 0 0 6px #303136;
  }

  .youlag-video-header {
    position: absolute;
    left: auto;
    right: 0;
    padding: 3px;
    background: transparent;
  }

  #youlagVideoSource {
    display: none;
  }

  #youlagCloseModal,
  #youlagMinimizeModal {
    padding: var(--yl-p-xs);
    width: 20px;
    height: 20px;
    font-size: var(--yl-text-sm);
  }
  
  .youlag-video-details {
    display: none;
  }

}

/*****************************************
 * END "YOULAG THEATER PIP VIEW"
 ****************************************/


/*****************************************
 * BEGIN "YOULAG TAGS (PLAYLISTs) MODAL"
 * Tags (playlist) management modal.
 ****************************************/

body.youlag-tags-modal-open {
  overflow: hidden;
}

#youlagTagsModal {
  position: fixed;
  z-index: 100000; /* Above theater modal: 99999 */
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;


  .yl-tags-content {
    background-color: #1f1f1f;
    border-radius: 12px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
    width: 90%;
    max-width: 350px;
    max-height: 80vh;
    max-height: 80dvh;
    overflow-y: auto;
    padding: var(--yl-p-md);
    margin: var(--yl-p-md);
  }



  .yl-tags-modal-title {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    font-size: var(--yl-text-md);
    font-weight: bold;
    margin-bottom: var(--yl-p-xs);
    padding-left: var(--yl-p-xs);

    .icon {
      filter: brightness(4);
    }
  }

  .yl-tags-list {
    list-style: none;
    padding: 0;
    margin: 0;
    overflow: auto;
    max-height: 450px;

    .yl-tags-list-item {
      display: flex;
      align-items: center;
      gap: var(--yl-m-2xs);
      padding: var(--yl-p-2xs) var(--yl-p-xs);
      color: var(--yl-color-text-default);
      font-size: var(--yl-text-sm);
      border-radius: 8px;

      &:hover {
        background-color: #303136;
      }

      label {
        min-height: 0;
        width: 100%;;
      }
    }
  }

  .yl-tags-modal-actions {
    display: flex;
    gap: var(--yl-p-2xs);
    margin-top: var(--yl-m-md);

    #yl-tags-modal-close {
      width: 100%;
    }
  }

}


@media (max-width: 840px) {
  #youlagTagsModal {
    align-items: flex-end;
    height: 100dvh;

    .yl-tags-content {
      margin: 0;
      max-width: unset;
      border-bottom-left-radius: 0; 
      border-bottom-right-radius: 0;
      animation: slideUp 0.15s ease-in-out forwards; /* Animate bottom sheet from bottom to up */

      .yl-tags-list {
        max-height: min(50vh, 400px);
      }
    }
  }


}


/*****************************************
 * END "YOULAG TAGS (PLAYLISTs) MODAL"
 ****************************************/


 /*****************************************
 * BEGIN "YOULAG EXTENSION SETTINGS PAGE"
 * Style for the extension settings page.
 ****************************************/

.yl-extension-settings-container {
  #yl_check_updates {
    float: right;
  }
}

.yl-extension-settings-form {

  .yl-form-section {
    border: 1px solid #ffffff45;
    padding: 1rem;
    border-radius: 12px;
    margin: 1rem 0;

    h1, h2, h3 {
      margin-bottom: 1.2rem;
    }
  }

  hr {
    margin: 1.4rem 0;
  }

  .yl-form-group-help {
    font-size: 0.9rem;
    color: #b3b3b3;
    margin-bottom: 0.25rem;
    font-weight: normal;
  }

  .form-group {
    padding: 0;
    margin-bottom: 1rem;

    .group-name,
    .group-controls,
    label,
    input[type="radio"],
    input[type="checkbox"] {
      /* Reset FreshRSS form group styles */
      display: block;
      min-width: 0;
      min-height: 0;
      width: auto;
      float: none;
      text-align: left;
      margin: 0;
      padding: 0;
    }

    .group-name,
    label {
      margin-bottom: 4px;
      line-height: 1;
    }

    input[readonly] {
      color: #959595;
      user-select: none;
      cursor: default;
      pointer-events: none;
    }
  }

  .form-group {
    .yl-form-group--radio {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 0.5rem;

      .yl-form-group--radio-input-container {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        
        label,
        .yl-form-group-help  {
          /* Radio button + gap */
          padding-left: calc(15px + 0.5rem);
        }

        .yl-form-control-radio-input {
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }
      }

    }
  }

  .yl-form-category-container {
    max-height: 190px;
    overflow: auto;
    border: 1px solid hsla(0, 0%, 100%, .2705882353);
    padding: 1rem;
    border-radius: 12px;

    hr {
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
    }

  }

  #yl_category_all:checked {
    /* When "All pages and categories" is selected, disable other sub-options. */
    & ~ .yl-form-category-subitem-container {
      opacity: 0.5;
      pointer-events: none;
      user-select: none;
      filter: grayscale(1);
    }
  }
}

 /*****************************************
 * END "YOULAG EXTENSION SETTINGS PAGE"
 ****************************************/


 /*****************************************
 * BEGIN "YOULAG HELPER CLASSES"
 * Reusable helper classes or adjustment
 * for unique cases.
 ****************************************/

.display-none {
  display: none !important;
}

.inline-block {
  display: inline-block !important;
}

.block {
  display: block !important;
}

.flex {
  display: flex !important;
}

.mb-auto {
  margin-bottom: auto !important;
}

.mb-0 {
  margin-bottom: 0 !important;
}

.yl-flex {
  display: flex;
}

.yl-flex-col {
  flex-direction: column;
}

.yt-items-center {
  align-items: center;
}

.yt-flex-1 {
  flex: 1;
}

.yl-gap-3xs {
  gap: var(--yl-space-3xs);
}

.yl-mb-md {
  margin-bottom: var(--yl-m-md);
}

.w-100 {
  width: 100%;
}
  
.aspect-ratio-16-9 {
  aspect-ratio: 16 / 9;
}

.rounded-md {
  border-radius: 12px;
}

.sticky-visible {
  transform: translateY(0);
  opacity: 1;
}

.sticky-hidden {
  transform: translateY(-100%);
  opacity: 0;
}

@media (min-width: 841px) {
  #aside_feed:not(.visible) {
    /* Sidenav is not visible, hide and show sidenav toggle button based on scroll down or up. */
    & ~ nav.nav_menu #nav_menu_toggle_aside {
      transition: 
        transform 0.15s ease-out,
        opacity 0.15s ease-out,
        background-color 0.2s;

      & .btn:not(:hover) {
        background-color: transparent;
      }
    }
    
    & ~ nav.nav_menu .sticky-visible--sidenav-toggle {
      transform: translateY(0);
      opacity: 1;
    }
    
    & ~ nav.nav_menu .sticky-hidden--sidenav-toggle {
      transform: translateY(-100%);
      opacity: 0;
    }
  }
}

[data-yl-invidious-instance],
[data-yl-video-source-default],
[data-yl-category-whitelist],
[data-yl-video-labels],
[yl_video_unread_badge] {
  /**
   * Elements containing user extension settings rendered in frontend.
   * This exposes the Youlag extension settings to allow `script.js`
   * to access them. These elements are hidden from view.
   */
  display: none;
}

a[data-type="application/x-shockwave-flash"],
figure.enclosure img.enclosure-thumbnail {
  /* Hide videos description with empty content */
  display: none;
}

/*****************************************
 * END "YOULAG HELPER CLASSES"
 ****************************************/