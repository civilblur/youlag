let youtubeId,youlagScriptLoaded=!1,youlagNavMenuInitialized=!1,youlagRestoreVideoQueueRan=!1,youlagActive=!0,youtubeExtensionInstalled=!1,previousPageTitle=null,modePip=!1,modeFullscreen=!0;const modalVideoContainerClassName="youlag-theater-modal-container",modalVideoContentClassName="youlag-theater-modal-content",modalCloseIdName="youlagCloseModal",modalMinimizeIdName="youlagMinimizeModal",modalVideoSourceIdName="youlagVideoSource",modalVideoSourceDefaultIdName="youlagVideoSourceDefault",modalToggleFavoriteIdName="youlagToggleFavorite",modalFavoriteClassName="youlag-favorited",modalTagsManageIdName="youlagTagsManage",modalTagsContainerIdName="youlagTagsModal";function youlagSettingsPageEventListeners(){const e=document.getElementById("yl_playback_invidious"),t=document.getElementById("yl_playback_youtube"),a=document.getElementById("yl_invidious_url_1");if(e&&t&&a){function o(){e.checked?a.setAttribute("required","required"):a.removeAttribute("required")}e.addEventListener("change",o),t.addEventListener("change",o),o()}}function handleActiveRssItem(e,t=!1){let a;if(t){const t=e;a={...t.queue[t.activeIndex],queue:t.queue,activeIndex:t.activeIndex}}else{const t=e instanceof Event?e.target.closest("div[data-feed]"):e.closest("div[data-feed]");if(!t)return;a=extractFeedItemData(t),a.feedItemEl=t}createVideoModal(a),modePip||setModeFullscreen(!0)}function getVideoIdFromUrl(e){const t=e.match(/(?:\/|^)(?:shorts\/|v\/|e(?:mbed)?\/|\S*?[?&]v=|\S*?[?&]id=|v=)([a-zA-Z0-9_-]{11})(?:[\/\?]|$)/);return t?t[1]:""}function getBaseUrl(e){try{const t=new URL(e);return`${t.protocol}//${t.host}`}catch(e){return console.error("Invalid URL:",e),""}}function matchURL(e){if(!e||"string"!=typeof e)return[];let t=e.replace(/<a [^>]*href=["'][^"']+["'][^>]*>.*?<\/a>/gi,"").match(/https?:\/\/[\w\-._~:/?#\[\]@!$&'()*+,;=%]+[\w\-_/~#@?=&%]/g);return t||[]}function appendUrl(e){if(!e||"string"!=typeof e)return e;let t=/https?:\/\/[\w\-._~:/?#\[\]@!$&'()*+,;=%]+[\w\-_/~#@?=&%]/g,a=e.split(/(<a [^>]*>.*?<\/a>)/gi);for(let e=0;e<a.length;e++)/^<a [^>]*>.*<\/a>$/i.test(a[e])||(a[e]=a[e].replace(t,function(e){return'<a href="'+e+'" target="_blank">'+e+"</a>"}));return a.join("")}function sanitizeExtractedVideoUrl(e){const t=String(e);if(/^https?:\/\//.test(t.trim()))return t.trim();const a=t.match(/href=["']([^"'>]+)["']/);return a&&a[1]?a[1]:""}function extractFeedItemData(e){const t=e.getAttribute("data-entry")?.match(/([0-9]+)$/);let a=e.querySelector('.item.titleAuthorSummaryDate a[href*="youtube"], .item.titleAuthorSummaryDate a[href*="/watch?v="]')?.href||"";a||(a=e.querySelector('.enclosure-content a[href*="youtube"], .enclosure-content a[href*="/watch?v="]'),a=sanitizeExtractedVideoUrl(a),youtubeExtensionInstalled=!!a);const o=""!==a,n=null!==e.querySelector(".enclosure-description"),i=o?getBaseUrl(a):"";youtubeId=a?getVideoIdFromUrl(a):"";const l=youtubeId?`https://www.youtube.com/watch?v=${youtubeId}`:"",s=youtubeId?`https://www.youtube.com/embed/${youtubeId}`:"",r=youtubeId?`${i}/embed/${youtubeId}`:"",c=e.querySelector(".flux_header"),d=c?.querySelector('.website a.item-element[href*="get=f_"]'),u=e.querySelector(".content div.text span[data-yl-invidious-instance]"),g=u?u.getAttribute("data-yl-invidious-instance"):"",y=e.querySelector(".content div.text span[data-yl-video-source-default]"),m=y?y.getAttribute("data-yl-video-source-default"):"",v={entryId:t?t[1]:null,author:c?.getAttribute("data-article-authors")||"",author_filter_url:d?.href||"",favicon:e.querySelector("img.favicon")?.src||"",favorite_toggle_url:e.querySelector("a.item-element.bookmark")?.href||"",favorited:!e.querySelector('.bookmark img[src*="non-starred"]'),thumbnail:e.querySelector(".thumbnail img")?.src||"",title:e.querySelector(".item-element.title")?.childNodes[0].textContent.trim()||"",external_link:e.querySelector(".item-element.title")?.href||"",date:e.querySelector(".flux_content .date")?.textContent.trim()||"",isVideoFeedItem:o,youtubeId:youtubeId,youtube_embed_url:s,video_embed_url:r,video_invidious_instance_1:g||"",video_source_default:m||"youtube",video_description:`<div class="youlag-video-description-content">\n        ${o&&n?appendUrl(e.querySelector(".enclosure-description")?.innerHTML.trim()):e.querySelector("article div.text")?.innerHTML.trim()||""}\n      </div>`,video_youtube_url:l,video_invidious_redirect_url:""+(youtubeId?"https://redirect.invidious.io/watch?v="+youtubeId:"")};return setVideoQueue(v),v}function setVideoQueue(e){let t=[],a=0;try{const e=localStorage.getItem("youlagVideoQueue");if(e){const o=JSON.parse(e);Array.isArray(o.queue)&&(t=o.queue),"number"==typeof o.activeIndex&&(a=o.activeIndex)}}catch(e){}const o=e.video_youtube_url,n=t.findIndex(e=>e.video_youtube_url===o),i=document.body.classList.contains("youlag-mode--pip");-1===n?(t.push(e),a=t.length-1):a=n,localStorage.setItem("youlagVideoQueue",JSON.stringify({queue:t,activeIndex:a,isPipMode:i}))}function clearVideoQueue(){localStorage.removeItem("youlagVideoQueue")}function restoreVideoQueue(){if(youlagRestoreVideoQueueRan)return;youlagRestoreVideoQueueRan=!0;const e=localStorage.getItem("youlagVideoQueue");let t=null;if(e)try{t=JSON.parse(e)}catch(e){console.error("Error parsing youlagVideoQueue from localStorage:",e)}if(!t||!0!==t.isPipMode)return;const a=document.body.classList;["yl-page-home","yl-page-important","yl-page-watch_later","yl-page-playlists","yl-page-category"].some(e=>a.contains(e))&&t&&Array.isArray(t.queue)&&"number"==typeof t.activeIndex&&t.queue.length>0&&(setModePip(!0),handleActiveRssItem(t,!0))}function setPageTitle(e){"string"==typeof e&&e.length>0?(null===previousPageTitle&&(previousPageTitle=document.title),document.title=e):null!==previousPageTitle&&(document.title=previousPageTitle,previousPageTitle=null)}function createVideoModal(e){let t=document.getElementById("youlagTheaterModal");t||(t=document.createElement("div"),t.id="youlagTheaterModal",t.innerHTML=`<div class="${modalVideoContainerClassName}"></div>`,document.body.appendChild(t));const a=t.querySelector(`.${modalVideoContainerClassName}`),o=e.video_source_default,n="youtube"===o?"selected":"",i="invidious_1"===o?"selected":"",l=e.video_invidious_instance_1;function s(t){return"invidious_1"===t&&e.video_invidious_instance_1&&e.youtubeId?`${e.video_invidious_instance_1.replace(/\/$/,"")}/embed/${e.youtubeId}`:"youtube"===t?e.youtube_embed_url:""}const r=s("invidious_1"===o?"invidious_1":"youtube");setPageTitle(e.title),a.innerHTML=`\n    <div class="${modalVideoContentClassName}">\n\n      <div class="youlag-video-header">\n        <select id="youlagVideoSource" class="${l&&e.isVideoFeedItem?"":"display-none"}">\n          <option value="youtube" ${n}>YouTube</option>\n          <option value="invidious_1" ${i}>Invidious</option>\n        </select>\n\n        <button id="${modalMinimizeIdName}">‚ßâ</button>\n        <button id="${modalCloseIdName}">√ó</button>\n      </div>\n\n      <div class="youlag-video-container">\n        <div class="youlag-thumbnail-container">\n          <img src="${e.thumbnail}" class="youlag-video-thumbnail" />\n        </div>\n        <div class="youlag-iframe-container">\n          <iframe class="youlag-iframe"\n                  src="${r}" frameborder="0" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>\n        </div>\n      </div>\n\n\n      <div class="youlag-video-details">\n\n        <div class="youlag-video-metadata-container">\n          <h2 class="youlag-video-metadata-title">${e.title}</h2>\n          <div class="youlag-video-metadata-panel">\n\n            <section class="youlag-video-author-section">\n              <a class="youlag-video-metadata-favicon-link" href="${e.author_filter_url}">\n                <img src="${e.favicon}" class="youlag-video-metadata-favicon" />\n              </a>\n\n              <div class="yl-flex yl-flex-col">\n                <div class="youlag-video-metadata-author">\n                  <a href="${e.author_filter_url}">${e.author}</a>\n                </div>\n                <div class="youlag-video-metadata-date">${e.date}</div>\n              </div>\n            </section>\n\n            <section class="youlag-video-actions-container">\n              <a href="#" \n                class="yl-video-action-button youlag-favorited youlag-favorited--${e.favorited}"\n                id="youlagToggleFavorite">\n                <div class="youlag-favorited-icon"></div>\n              </a>\n\n              <a href="#" \n                class="yl-video-action-button"\n                id="youlagTagsManage">\n                <img class="icon" src="../themes/icons/label.svg" loading="lazy" alt="üè∑Ô∏è">\n              </a>\n\n              <a class="yl-video-action-button" href="${e.external_link}" target="_blank">\n                <span class="yl-video-action-button__icon">üåê</span><span>Source</span>\n              </a>\n\n              <a class="yl-video-action-button" href="${e.video_youtube_url}" target="_blank">\n                <span class="yl-video-action-button__icon">‚ñ∂Ô∏è</span><span>YouTube</span>\n              </a>\n              <a class="yl-video-action-button" href="${e.video_invidious_redirect_url}" target="_blank">\n                <span class="yl-video-action-button__icon">üì∫</span><span>Invidious</span>\n              </a>\n\n            </section>\n\n          </div>\n\n        </div>\n\n\n\n        <div class="youlag-video-description-container">\n          ${e.video_description}\n        </div>\n        \n      </div>\n\n    </div>\n  `;const c=a.querySelector("#youlagVideoSource"),d=a.querySelector(".youlag-iframe");if(c&&d&&c.addEventListener("change",function(){d.src=s(c.value)}),!e.youtubeId){t.classList.add("youlag-modal-feed-item--text"),document.querySelector(".youlag-iframe-container")&&document.querySelector(".youlag-iframe-container").remove()}a.querySelector(`#${modalCloseIdName}`)?.addEventListener("click",closeModal),a.querySelector(`#${modalMinimizeIdName}`)?.addEventListener("click",togglePipMode),a.querySelector("#youlagToggleFavorite")?.addEventListener("click",t=>{t.preventDefault(),toggleFavorite(e.favorite_toggle_url,a,e.feedItemEl)}),a.querySelector("#youlagTagsManage")?.addEventListener("click",async t=>{t.preventDefault(),createTagsModal(e.entryId,await getItemTags(e.entryId))}),history.pushState({modalOpen:!0},"",""),document.addEventListener("keydown",e=>{"Escape"===e.key&&closeModal()}),window.addEventListener("popstate",closeModal)}function toggleFavorite(e,t,a){const o=t.querySelector("#youlagToggleFavorite");o&&fetch(e,{method:"GET"}).then(e=>{if(e.ok){const e=o.classList.contains("youlag-favorited--true");if(o.classList.remove(`youlag-favorited--${e}`),o.classList.add(`youlag-favorited--${!e}`),a){const t=a.querySelector(".item-element.bookmark img.icon");e?(a.classList.remove("favorite"),t&&(t.src="../themes/Mapco/icons/non-starred.svg")):(a.classList.add("favorite"),t&&(t.src="../themes/Mapco/icons/starred.svg"))}}else console.error("Failed to toggle favorite status")}).catch(e=>console.error("Error:",e))}function closeModal(){const e=document.getElementById("youlagTheaterModal");e&&e.remove(),history.state&&history.state.modalOpen&&history.back(),setModePip(!1),setModeFullscreen(!1),setPageTitle(),clearVideoQueue()}function togglePipMode(){modePip?(setModePip(!1),setModeFullscreen(!0)):(setModePip(!0),setModeFullscreen(!1))}function setModePip(e){!0===e?(document.body.classList.add("youlag-mode--pip"),modePip=!0,modeFullscreen=!1):!1===e&&(document.body.classList.remove("youlag-mode--pip"),modePip=!1);try{const t=localStorage.getItem("youlagVideoQueue");if(t){const a=JSON.parse(t);a.isPipMode=!!e,localStorage.setItem("youlagVideoQueue",JSON.stringify(a))}}catch(e){}}function setModeFullscreen(e){!0===e?(document.body.classList.add("youlag-mode--fullscreen"),document.body.classList.remove("youlag-mode--pip"),modeFullscreen=!0,modePip=!1):!1===e&&(document.body.classList.remove("youlag-mode--fullscreen"),modeFullscreen=!1)}function setupClickListener(){if(!youlagActive)return;const e=document.querySelector("#stream");e&&e.addEventListener("click",e=>{if(e.target.closest("div[data-feed] .flux_header li.manage"))return;if(e.target.closest("div[data-feed] .flux_header li.labels"))return;if(e.target.closest("div[data-feed] .flux_header li.share"))return;if(e.target.closest("div[data-feed] .flux_header li.link"))return;if(e.target.closest('div[data-feed] .flux_header .website a[href^="./?get=f_"]'))return;const t=e.target.closest("div[data-feed]");t&&(handleActiveRssItem(e),collapseBackgroundFeedItem(t))})}function setupTagsDropdownOverride(){const e=document.querySelector("#stream");e&&e.addEventListener("click",async function(e){const t=e.target.closest("div[data-feed] .flux_header li.labels"),a=t?t.querySelector("a.dropdown-toggle"):null,o=e.target.closest('.item.labels a.dropdown-toggle[href^="#dropdown-labels-"]');if(a||o){e.preventDefault(),e.stopImmediatePropagation();let n=null,i="([0-9]+)$";a&&(n=t.querySelector(".dropdown-target")?.id,n=n?n.match(new RegExp(i)):null,n=n?n[1]:null),o&&(n=o.href,n=n?n.match(new RegExp(i)):null,n=n?n[1]:null),createTagsModal(n,await getItemTags(n))}},!0)}function createTagsModal(e,t){document.getElementById("youlagTagsModal")&&document.getElementById("youlagTagsModal").remove();let a=document.createElement("div");const o=!!document.querySelector("body.youlag-video-labels")?"Save to...":"Tags";a.id="youlagTagsModal",a.classList.add("youlag-tags-modal"),a.innerHTML=`\n    <forms class="yl-tags-content">\n      <h3 class="yl-tags-modal-title">\n        ${o}\n\n        <a href="./?c=tag" target="_blank"><img class="icon" src="../themes/Mapco/icons/configure.svg" loading="lazy" alt="‚öôÔ∏è"></a>\n      </h3>\n      <div class="yl-tags-list">\n        ${t.map(t=>`\n            <div class="yl-tags-list-item">\n              <input type="checkbox" id="yl-tag-${t.id}" data-tag-id="${t.id}" data-entry-id="${e}" ${t.checked?"checked":""} />\n              <label for="yl-tag-${t.id}">${t.name}</label>\n            </div>\n          `).join("")}\n      </div>\n      <div class="yl-tags-modal-actions">\n        <button id="yl-tags-modal-close" class="btn">Done</button>\n      </div>\n    </forms>\n  `,document.body.appendChild(a),document.body.classList.add("youlag-tags-modal-open");function n(){const e=document.getElementById("youlagTagsModal");e&&e.remove(),document.body.classList.remove("youlag-tags-modal-open"),document.removeEventListener("keydown",i,!0)}a.querySelectorAll('.yl-tags-list-item input[type="checkbox"]').forEach(e=>{e.addEventListener("change",function(){const e=this.getAttribute("data-tag-id");setItemTag(this.getAttribute("data-entry-id"),{id:e,checked:this.checked})})});function i(e){"Escape"===e.key&&(n(),e.stopPropagation())}a.querySelector("#yl-tags-modal-close").addEventListener("click",n),document.addEventListener("keydown",i,!0),a.addEventListener("mousedown",function(e){const t=a.querySelector(".yl-tags-content");t&&!t.contains(e.target)&&n()})}async function getItemTags(e){if(!e)return[];const t=`./?c=tag&a=getTagsForEntry&id_entry=${encodeURIComponent(e)}`;try{const e=await fetch(t,{method:"GET"});if(e.ok){const t=await e.json();if(Array.isArray(t))return t}}catch(e){console.error("Error fetching tags:",e)}return[]}async function setItemTag(e,t){const a={_csrf:document.querySelector('input[name="_csrf"]')?.getAttribute("value")||"",id_tag:t.id,name_tag:"",id_entry:e,checked:!!t.checked,ajax:1};try{const e=await fetch("./?c=tag&a=tagEntry&ajax=1",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)});if(e.ok){const t=await e.text();if(t&&t.trim().length>0)try{JSON.parse(t)}catch(e){console.error("Error parsing tag update response:",e)}}else console.error("Failed to update tag:",e.status)}catch(e){console.error("Error updating tag:",e)}}function collapseBackgroundFeedItem(e){const t=e;let a=t.classList.contains("active")&&t.classList.contains("current");const o=t.querySelectorAll("iframe");(o||youtubeExtensionInstalled)&&o.forEach(e=>{const t=e.getAttribute("src");t&&(e.setAttribute("data-original",t),e.setAttribute("src",""))}),a&&(t.classList.remove("active"),t.classList.remove("current"))}function getCurrentPage(){const e=window.location.pathname,t=new URLSearchParams(window.location.search);function a(e){return e.split(" ").map(e=>"yl-page-"+e).join(" ")}const o=[{path:"/i/",match:()=>"normal"===t.get("a")&&t.has("search"),className:"search_results"},{path:"/i/",match:()=>!t.has("get")&&!t.has("c"),className:"home"},{path:"/i/",match:()=>"extension"===t.get("c"),className:"extension"},{path:"/i/",match:()=>"i"===t.get("get"),className:"important"},{path:"/i/",match:()=>"s"===t.get("get"),className:"watch_later"},{path:"/i/",match:()=>"T"===t.get("get"),className:"playlists"},{path:"/i/",match:()=>/^t_\d+$/.test(t.get("get")||""),className:()=>`playlists t_${(t.get("get")||"").substring(2)}`},{path:"/i/",match:()=>t.get("get")&&t.get("get").startsWith("c_"),className:()=>`category c_${t.get("get").substring(2)}`},{path:"/i/",match:()=>t.get("get")&&t.get("get").startsWith("f_"),className:()=>{t.get("get").substring(2);return"category"}}];for(const t of o)if(e===t.path&&t.match()){return a("function"==typeof t.className?t.className():t.className)}return""}function getSubpageParentId(e){if(/^t_\d+$/.test(e))return"playlists";if(/^f_\d+$/.test(e)){const e=document.querySelector("#sidebar .tree-folder.category.active");return e&&e.id?e.id:null}return null}function getCategoryWhitelist(){const e=document.querySelector("#yl_category_whitelist");if(!e)return[];const t=e.getAttribute("data-yl-category-whitelist");if(!t)return["all"];const a=t.split(",").map(e=>e.trim()).filter(Boolean);try{localStorage.setItem("youlagCategoryWhitelist",JSON.stringify(a))}catch(e){}return a}function isPageWhitelisted(e,t){if(!Array.isArray(e)||!t)return!1;if(e.includes("all"))return!0;const a=["home","important","watch_later","playlists","search_results"];for(const o of a)if(t===`yl-page-${o}`&&e.includes(o))return!0;if(t.startsWith("yl-page-category")){const a=t.match(/c_(\d+)/);if(a&&e.includes("c_"+a[1]))return!0}const o=new URLSearchParams(window.location.search).get("get");if(o){const t=getSubpageParentId(o);if(t&&e.includes(t))return!0}return!1}function setCategoryWhitelistClass(){let e=[];try{const t=localStorage.getItem("youlagCategoryWhitelist");t&&(e=JSON.parse(t))}catch(e){}const t=getCurrentPage(),a=isPageWhitelisted(e,t);youlagActive=a,document.body.classList.toggle("youlag-active",a),document.body.classList.toggle("youlag-inactive",!a);const o=getCategoryWhitelist(),n=isPageWhitelisted(o,t);if(youlagActive=n,n!==a){document.body.classList.toggle("youlag-active",n),document.body.classList.toggle("youlag-inactive",!n);try{localStorage.setItem("youlagCategoryWhitelist",JSON.stringify(o))}catch(e){}return n}return a}function setVideoLabelsClass(){const e=localStorage.getItem("youlagVideoLabels")||!1,t=document.querySelector("#yl_video_labels");let a;t&&(a=t.getAttribute("data-yl-video-labels")),"true"===a?(document.body.classList.add("youlag-video-labels"),localStorage.setItem("youlagVideoLabels","true")):"false"===a?(document.body.classList.remove("youlag-video-labels"),localStorage.setItem("youlagVideoLabels","false")):"true"===e?document.body.classList.add("youlag-video-labels"):document.body.classList.remove("youlag-video-labels")}function setUnreadBadgeClass(){const e=document.querySelector("#yl_video_unread_badge");let t;e&&(t=e.getAttribute("data-yl-video-unread-badge")),"true"===t?document.body.classList.add("youlag-video-unread-badge"):document.body.classList.remove("youlag-video-unread-badge")}function setBodyPageClass(){getCurrentPage()&&(document.body.className+=" "+getCurrentPage()),currentPageParams=new URLSearchParams(window.location.search).get("get"),getSubpageParentId(currentPageParams)&&(document.body.className+=" yl-page-"+getSubpageParentId(currentPageParams)),setVideoLabelsClass(),setUnreadBadgeClass(),setCategoryWhitelistClass()}function setVideoLabelsTitle(e,t){if(document.body.classList.contains(e)&&document.body.classList.contains("youlag-video-labels")){const e=document.title.match(/^\s*(\((\d+)\)\s*)?(.+?)\s*¬∑\s*(.+?)\s*$/);if(e){const a=e[1]?e[1]:"",o=e[4]?e[4]:"";document.title=`${a}${t} ¬∑ ${o}`}}}function setupNavMenu(){if(youlagNavMenuInitialized)return;youlagNavMenuInitialized=!0;const e=document.getElementById("yl_nav_menu_container"),t=e?.querySelector("#yl_nav_menu_container_content"),a=e?.querySelector("#yl_nav_menu_container_toggle"),o=e?.querySelector("#dropdown-search-wrapper"),n=document.querySelector("#global nav.nav_menu:not(#yl_nav_menu_container)"),i=document.querySelector("#new-article + .transition");if(e&&t&&a&&n&&i){if(t.hidden=!0,t.classList.add("nav_menu"),i.classList.add("yl-freshrss-transition--sticky"),e.classList.add("yl-nav-menu-container--sticky"),o&&i.appendChild(o),i.appendChild(a),i.nextSibling?i.parentNode.insertBefore(e,i.nextSibling):i.parentNode.appendChild(e),n&&t){Array.from(n.children).forEach(e=>{"nav_menu_toggle_aside"!==e.id&&t.appendChild(e)})}setupNavMenuStickyScroll(i,e),document.addEventListener("click",function(a){if(a.target.closest("#yl_nav_menu_container_toggle")&&document.body.contains(e)){const o=e.classList.toggle("yl-nav-menu-container--open");t.hidden=!o,a.preventDefault(),a.stopPropagation()}})}}function setupNavMenuStickyScroll(e,t){let a=window.scrollY,o=!1,n=!1;function i(a){const o=e=>{e.classList.toggle("sticky-visible",a),e.classList.toggle("sticky-hidden",!a)};o(e),o(t)}window.addEventListener("scroll",function(){o||(window.requestAnimationFrame(()=>{!function(){if(n)return n=!1,void(a=window.scrollY);const e=window.scrollY;e<=0?i(!0):e>a+2?i(!1):e<a-2&&i(!0),a=e}(),o=!1}),o=!0)});new MutationObserver(()=>{n=!0}).observe(t,{attributes:!0,attributeFilter:["class"]})}function init(){setBodyPageClass(),setupClickListener(),setupTagsDropdownOverride(),setTimeout(()=>{youlagSettingsPageEventListeners()},1500),setupNavMenu(),restoreVideoQueue(),setVideoLabelsTitle("yl-page-playlists","Playlists"),setVideoLabelsTitle("yl-page-watch_later","Watch later"),removeYoulagLoadingState(),youlagScriptLoaded=!0}function removeYoulagLoadingState(){document.body.classList.add("youlag-loaded")}function initFallback(){"complete"===document.readyState||"interactive"===document.readyState||!0===youlagScriptLoaded?init():(document.addEventListener("DOMContentLoaded",init),window.addEventListener("load",init))}document.addEventListener("keydown",function(e){if("Escape"===e.key&&document.body.classList.contains("youlag-inactive")){const t=document.querySelector("#stream div[data-feed].active.current");t&&(t.classList.remove("active","current"),e.stopPropagation())}});const checkInitInterval=setInterval(()=>{"complete"!==document.readyState&&!0!==youlagScriptLoaded||(init(),clearInterval(checkInitInterval))},1e3);initFallback();